import{l as x,h as k,a as V,k as I,e as y,m as C,i as S}from"./index-CGN9NtC_.js";import{r,v as b,x as t,L as o,a6 as s,a3 as $,C as B,l as v}from"./index-BDYsDoi3.js";const M={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"},L={class:"m-5 max-w-md w-full rounded-lg bg-white p-8 shadow-lg dark:bg-gray-800"},N={class:"mb-2 flex items-center"},U={key:0,class:"mb-2 text-red-500"},D={__name:"Login",setup(G){const u=r(""),d=r(""),m=r(!0),i=r();function _(){V.post("/login",{username:u.value,password:d.value}).then(n=>{const{token:e,userId:l}=n.data;m.value&&(localStorage.setItem("token",e),localStorage.setItem("userId",l)),sessionStorage.setItem("token",e),sessionStorage.setItem("userId",l),window.location.href="/"}).catch(n=>{i.value="登录失败：用户名或密码错误",console.error("登录失败:",n)})}return(n,e)=>{const l=I,p=y,c=C,f=x,g=k,w=S;return v(),b("div",M,[t("div",L,[e[8]||(e[8]=t("h2",{class:"mb-6 text-center text-2xl font-bold"}," 登录 ",-1)),o(f,{class:"mb-4"},{default:s(()=>[o(l,null,{default:s(()=>e[3]||(e[3]=[t("i",{class:"i-carbon-user"},null,-1)])),_:1}),o(c,{variant:"on"},{default:s(()=>[o(p,{id:"on_username",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a)},null,8,["modelValue"]),e[4]||(e[4]=t("label",{for:"on_username"},"用户名",-1))]),_:1})]),_:1}),o(f,{class:"mb-4"},{default:s(()=>[o(l,null,{default:s(()=>e[5]||(e[5]=[t("i",{class:"i-carbon-unlocked"},null,-1)])),_:1}),o(c,{variant:"on"},{default:s(()=>[o(p,{id:"on_password",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),type:"password"},null,8,["modelValue"]),e[6]||(e[6]=t("label",{for:"on_password"},"密码",-1))]),_:1})]),_:1}),t("div",N,[e[7]||(e[7]=t("label",{for:"rememberMe"}," 记住我 ",-1)),o(g,{id:"rememberMe",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),class:"ml-2",binary:"",value:"记住我"},null,8,["modelValue"])]),i.value?(v(),b("div",U,$(i.value),1)):B("",!0),o(w,{class:"w-full rounded py-2",label:"登录",onClick:_})])])}}};export{D as default};
