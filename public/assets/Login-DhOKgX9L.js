import{l as w,e as k,j as x,k as V,c as y,m as S,f as M}from"./index-BBNpnSXy.js";import{an as r,c as g,a as t,p as o,P as s,M as $,e as B,o as v}from"./index-BELxIgEm.js";const C={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"},N={class:"m-5 max-w-md w-full rounded-lg bg-white p-8 shadow-lg dark:bg-gray-800"},U={class:"mb-2 flex items-center"},j={key:0,class:"mb-2 text-red-500"},D={__name:"Login",setup(G){const u=r(""),d=r(""),m=r(!0),i=r();function b(){x.post("/login",{username:u.value,password:d.value}).then(n=>{const{token:e,userId:l}=n.data;m.value&&(localStorage.setItem("token",e),localStorage.setItem("userId",l)),sessionStorage.setItem("token",e),sessionStorage.setItem("userId",l),window.location.href="/"}).catch(n=>{sessionStorage.removeItem("token"),sessionStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("userId"),window.location.href="/login",i.value="登录失败：用户名或密码错误",console.error("登录失败:",n)})}return(n,e)=>{const l=V,p=y,c=S,f=w,_=k,I=M;return v(),g("div",C,[t("div",N,[e[8]||(e[8]=t("h2",{class:"mb-6 text-center text-2xl font-bold"}," 登录 ",-1)),o(f,{class:"mb-4"},{default:s(()=>[o(l,null,{default:s(()=>e[3]||(e[3]=[t("i",{class:"i-carbon-user"},null,-1)])),_:1}),o(c,{variant:"on"},{default:s(()=>[o(p,{id:"on_username",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a)},null,8,["modelValue"]),e[4]||(e[4]=t("label",{for:"on_username"},"用户名",-1))]),_:1})]),_:1}),o(f,{class:"mb-4"},{default:s(()=>[o(l,null,{default:s(()=>e[5]||(e[5]=[t("i",{class:"i-carbon-unlocked"},null,-1)])),_:1}),o(c,{variant:"on"},{default:s(()=>[o(p,{id:"on_password",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),type:"password"},null,8,["modelValue"]),e[6]||(e[6]=t("label",{for:"on_password"},"密码",-1))]),_:1})]),_:1}),t("div",U,[e[7]||(e[7]=t("label",{for:"rememberMe"}," 记住我 ",-1)),o(_,{id:"rememberMe",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),class:"ml-2",binary:"",value:"记住我"},null,8,["modelValue"])]),i.value?(v(),g("div",j,$(i.value),1)):B("",!0),o(I,{class:"w-full rounded py-2",label:"登录",onClick:b})])])}}};export{D as default};
