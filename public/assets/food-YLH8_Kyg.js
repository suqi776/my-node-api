import{u as g,i as h,a as v,b as y,E as I}from"./index-D0xXknh8.js";import{a as _}from"./request-ChkO45HW.js";import{u as k}from"./index-iMfEmTMt.js";import{r as s,ao as l,Q as x,u as C,o as E}from"./index-Cvt6w_YP.js";import{i as $,a as A}from"./install-ChtMYC4i.js";import{i as F}from"./install-1ua2xAh_.js";const G={__name:"food",setup(j){g([h,$,v,y,A,F]);const u=s(k()),c=l(()=>u.value?"dark":""),d=sessionStorage.getItem("userId")||localStorage.getItem("userId"),o=s([]),n=l(()=>Object.keys(o.value)),m=l(()=>n.value.map(e=>({value:o.value[e],name:e})));_.post("/info/getInfoFoodByUserId",{userId:d}).then(e=>{o.value=e.data.food;const t={};o.value.forEach(a=>{a&&a.replace(/，/g,",").split(",").map(r=>r.trim()).forEach(r=>{t[r]=(t[r]||0)+1})});const p=Object.entries(t).sort((a,i)=>i[1]-a[1]),b=Object.fromEntries(p);o.value=b}).catch(e=>{console.error("失败:",e)});const f=s({backgroundColor:"",title:{text:"饮食榜",left:"center"},legend:{orient:"vertical",left:"left",data:n},toolbox:{show:!0,feature:{saveAsImage:{title:"保存为图片"}}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"饮食",type:"pie",radius:[50,250],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:m}]});return(e,t)=>(E(),x(C(I),{class:"h-600px border border-blueGray rounded-xl p-2 md:h-full",option:f.value,theme:c.value,autoresize:""},null,8,["option","theme"]))}};export{G as default};
