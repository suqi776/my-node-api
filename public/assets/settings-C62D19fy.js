import{U as ht,b as ti,c as ii}from"./index-BDgqcwxD.js";import{R as ri,b as ai}from"./index-Dmb-oCFB.js";import{s as ni}from"./index-D2L0KLMp.js";import{aK as oi,aL as si,aM as li,aN as ci,aO as hi,aP as ui,aQ as di,F as Mt,aR as fi,aS as pi,aT as mi,aU as gi,aV as vi,aW as bi,aX as yi,T as At,aY as wi,aZ as Ei,a_ as Di,a$ as xi,b0 as Oi,b1 as Ci,b2 as Si,b3 as Ti,b4 as ki,b5 as Mi,ao as Ai,b6 as Ri,Q as Rt,f as He,c as ge,b as z,b7 as Ii,b8 as Ni,b9 as Pi,ba as _i,U as Bi,bb as Li,P as je,d as Ce,aH as ji,bc as zi,ax as Hi,bd as Ui,be as Xi,bf as $i,bg as Yi,bh as Wi,bi as Vi,bj as qi,bk as Gi,bl as Ki,bm as Fi,bn as Ji,aB as Qi,aI as Zi,bo as er,bp as tr,bq as ir,aE as rr,br as ar,bs as nr,bt as or,bu as sr,bv as lr,bw as cr,bx as hr,by as ur,bz as dr,az as fr,bA as pr,bB as mr,bC as gr,bD as vr,at as br,bE as yr,bF as wr,bG as Er,bH as Dr,bI as xr,bJ as Or,m as ae,aq as Ve,n as It,S as Cr,e as Sr,bK as Tr,bL as kr,an as Mr,bM as Ar,bN as Rr,bO as Ir,as as Nr,bP as Pr,bQ as _r,aJ as Br,bR as Lr,bS as jr,bT as zr,bU as Hr,o as ue,bV as Ur,bW as Xr,bX as $r,bY as Yr,bZ as Wr,b_ as Vr,aG as qr,r as ye,b$ as Gr,c0 as Kr,l as Fr,g as ze,a as Jr,O as Nt,R as Pt,c1 as Qr,c2 as Zr,c3 as ea,c4 as ta,c5 as ia,c6 as ra,c7 as aa,ay as na,c8 as oa,c9 as sa,ca as la,t as qe,cb as ca,Y as ha,cc as ua,aF as da,aA as fa,cd as pa,ce as ma,cf as ga,u as _t,cg as va,ch as ba,ci as ya,cj as wa,ck as Ea,cl as Da,cm as xa,cn as Oa,co as Ca,cp as Sa,cq as Ta,cr as ka,cs as Ma,ct as Aa,cu as Ra,cv as Ia,ap as Re,cw as Na,cx as Pa,aC as Bt,aD as _a,cy as Ba,cz as La,cA as ja,w as Xe,cB as za,V as De,a8 as Ha,cC as Ua,a5 as Ge,cD as Xa,B as $a,ar as Ya,_ as Wa}from"./index-Cvt6w_YP.js";import{g as Va,c as qa,b as Ga,a as Ka}from"./request-ChkO45HW.js";import{u as Fa}from"./useInfoPinia-CpRqccAx.js";import"./Date-D8F-ftyC.js";/**
* vue v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ja=()=>{},Qa=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:oi,BaseTransitionPropsValidators:si,Comment:li,DeprecationTypes:ci,EffectScope:hi,ErrorCodes:ui,ErrorTypeStrings:di,Fragment:Mt,KeepAlive:fi,ReactiveEffect:pi,Static:mi,Suspense:gi,Teleport:vi,Text:bi,TrackOpTypes:yi,Transition:At,TransitionGroup:wi,TriggerOpTypes:Ei,VueElement:Di,assertNumber:xi,callWithAsyncErrorHandling:Oi,callWithErrorHandling:Ci,camelize:Si,capitalize:Ti,cloneVNode:ki,compatUtils:Mi,compile:Ja,computed:Ai,createApp:Ri,createBlock:Rt,createCommentVNode:He,createElementBlock:ge,createElementVNode:z,createHydrationRenderer:Ii,createPropsRestProxy:Ni,createRenderer:Pi,createSSRApp:_i,createSlots:Bi,createStaticVNode:Li,createTextVNode:je,createVNode:Ce,customRef:ji,defineAsyncComponent:zi,defineComponent:Hi,defineCustomElement:Ui,defineEmits:Xi,defineExpose:$i,defineModel:Yi,defineOptions:Wi,defineProps:Vi,defineSSRCustomElement:qi,defineSlots:Gi,devtools:Ki,effect:Fi,effectScope:Ji,getCurrentInstance:Qi,getCurrentScope:Zi,getCurrentWatcher:er,getTransitionRawChildren:tr,guardReactiveProps:ir,h:rr,handleError:ar,hasInjectionContext:nr,hydrate:or,hydrateOnIdle:sr,hydrateOnInteraction:lr,hydrateOnMediaQuery:cr,hydrateOnVisible:hr,initCustomFormatter:ur,initDirectivesForSSR:dr,inject:fr,isMemoSame:pr,isProxy:mr,isReactive:gr,isReadonly:vr,isRef:br,isRuntimeOnly:yr,isShallow:wr,isVNode:Er,markRaw:Dr,mergeDefaults:xr,mergeModels:Or,mergeProps:ae,nextTick:Ve,normalizeClass:It,normalizeProps:Cr,normalizeStyle:Sr,onActivated:Tr,onBeforeMount:kr,onBeforeUnmount:Mr,onBeforeUpdate:Ar,onDeactivated:Rr,onErrorCaptured:Ir,onMounted:Nr,onRenderTracked:Pr,onRenderTriggered:_r,onScopeDispose:Br,onServerPrefetch:Lr,onUnmounted:jr,onUpdated:zr,onWatcherCleanup:Hr,openBlock:ue,popScopeId:Ur,provide:Xr,proxyRefs:$r,pushScopeId:Yr,queuePostFlushCb:Wr,reactive:Vr,readonly:qr,ref:ye,registerRuntimeCompiler:Gr,render:Kr,renderList:Fr,renderSlot:ze,resolveComponent:Jr,resolveDirective:Nt,resolveDynamicComponent:Pt,resolveFilter:Qr,resolveTransitionHooks:Zr,setBlockTracking:ea,setDevtoolsHook:ta,setTransitionHooks:ia,shallowReactive:ra,shallowReadonly:aa,shallowRef:na,ssrContextKey:oa,ssrUtils:sa,stop:la,toDisplayString:qe,toHandlerKey:ca,toHandlers:ha,toRaw:ua,toRef:da,toRefs:fa,toValue:pa,transformVNodeArgs:ma,triggerRef:ga,unref:_t,useAttrs:va,useCssModule:ba,useCssVars:ya,useHost:wa,useId:Ea,useModel:Da,useSSRContext:xa,useShadowRoot:Oa,useSlots:Ca,useTemplateRef:Sa,useTransitionState:Ta,vModelCheckbox:ka,vModelDynamic:Ma,vModelRadio:Aa,vModelSelect:Ra,vModelText:Ia,vShow:Re,version:Na,warn:Pa,watch:Bt,watchEffect:_a,watchPostEffect:Ba,watchSyncEffect:La,withAsyncContext:ja,withCtx:Xe,withDefaults:za,withDirectives:De,withKeys:Ha,withMemo:Ua,withModifiers:Ge,withScopeId:Xa},Symbol.toStringTag,{value:"Module"}));var Za=function(e){var t=e.dt;return`
.p-fieldset {
    background: `.concat(t("fieldset.background"),`;
    border: 1px solid `).concat(t("fieldset.border.color"),`;
    border-radius: `).concat(t("fieldset.border.radius"),`;
    color: `).concat(t("fieldset.color"),`;
    padding:  `).concat(t("fieldset.padding"),`;
    margin: 0;
}

.p-fieldset-legend {
    background: `).concat(t("fieldset.legend.background"),`;
    border-radius: `).concat(t("fieldset.legend.border.radius"),`;
    border-width: `).concat(t("fieldset.legend.border.width"),`;
    border-style: solid;
    border-color: `).concat(t("fieldset.legend.border.color"),`;
    padding: `).concat(t("fieldset.legend.padding"),`;
    transition: background `).concat(t("fieldset.transition.duration"),", color ").concat(t("fieldset.transition.duration"),", outline-color ").concat(t("fieldset.transition.duration"),", box-shadow ").concat(t("fieldset.transition.duration"),`;
}

.p-fieldset-toggleable > .p-fieldset-legend {
    padding: 0;
}

.p-fieldset-toggle-button {
    cursor: pointer;
    user-select: none;
    overflow: hidden;
    position: relative;
    text-decoration: none;
    display: flex;
    gap: `).concat(t("fieldset.legend.gap"),`;
    align-items: center;
    justify-content: center;
    padding: `).concat(t("fieldset.legend.padding"),`;
    background: transparent;
    border: 0 none;
    border-radius: `).concat(t("fieldset.legend.border.radius"),`;
    transition: background `).concat(t("fieldset.transition.duration"),", color ").concat(t("fieldset.transition.duration"),", outline-color ").concat(t("fieldset.transition.duration"),", box-shadow ").concat(t("fieldset.transition.duration"),`;
    outline-color: transparent;
}

.p-fieldset-legend-label {
    font-weight: `).concat(t("fieldset.legend.font.weight"),`;
}

.p-fieldset-toggle-button:focus-visible {
    box-shadow: `).concat(t("fieldset.legend.focus.ring.shadow"),`;
    outline: `).concat(t("fieldset.legend.focus.ring.width")," ").concat(t("fieldset.legend.focus.ring.style")," ").concat(t("fieldset.legend.focus.ring.color"),`;
    outline-offset: `).concat(t("fieldset.legend.focus.ring.offset"),`;
}

.p-fieldset-toggleable > .p-fieldset-legend:hover {
    color: `).concat(t("fieldset.legend.hover.color"),`;
    background: `).concat(t("fieldset.legend.hover.background"),`;
}

.p-fieldset-toggle-icon {
    color: `).concat(t("fieldset.toggle.icon.color"),`;
    transition: color `).concat(t("fieldset.transition.duration"),`;
}

.p-fieldset-toggleable > .p-fieldset-legend:hover .p-fieldset-toggle-icon {
    color: `).concat(t("fieldset.toggle.icon.hover.color"),`;
}

.p-fieldset .p-fieldset-content {
    padding: `).concat(t("fieldset.content.padding"),`;
}
`)},en={root:function(e){var t=e.props;return["p-fieldset p-component",{"p-fieldset-toggleable":t.toggleable}]},legend:"p-fieldset-legend",legendLabel:"p-fieldset-legend-label",toggleButton:"p-fieldset-toggle-button",toggleIcon:"p-fieldset-toggle-icon",contentContainer:"p-fieldset-content-container",content:"p-fieldset-content"},tn=$a.extend({name:"fieldset",theme:Za,classes:en}),rn={name:"BaseFieldset",extends:ni,props:{legend:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:null,default:null}},style:tn,provide:function(){return{$pcFieldset:this,$parentInstance:this}}},Lt={name:"Fieldset",extends:rn,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{id:this.$attrs.id,d_collapsed:this.collapsed}},watch:{"$attrs.id":function(e){this.id=e||ht()},collapsed:function(e){this.d_collapsed=e}},mounted:function(){this.id=this.id||ht()},methods:{toggle:function(e){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:e,value:this.d_collapsed})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.legend}},directives:{ripple:ri},components:{PlusIcon:ti,MinusIcon:ai}};function Ne(r){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(r)}function ut(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),t.push.apply(t,i)}return t}function dt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ut(Object(t),!0).forEach(function(i){an(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function an(r,e,t){return(e=nn(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nn(r){var e=on(r,"string");return Ne(e)=="symbol"?e:e+""}function on(r,e){if(Ne(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Ne(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var sn=["id"],ln=["id","aria-controls","aria-expanded","aria-label"],cn=["id","aria-labelledby"];function hn(r,e,t,i,l,o){var c=Nt("ripple");return ue(),ge("fieldset",ae({class:r.cx("root")},r.ptmi("root")),[z("legend",ae({class:r.cx("legend")},r.ptm("legend")),[ze(r.$slots,"legend",{toggleCallback:o.toggle},function(){return[r.toggleable?He("",!0):(ue(),ge("span",ae({key:0,id:l.id+"_header",class:r.cx("legendLabel")},r.ptm("legendLabel")),qe(r.legend),17,sn)),r.toggleable?De((ue(),ge("button",ae({key:1,id:l.id+"_header",type:"button","aria-controls":l.id+"_content","aria-expanded":!l.d_collapsed,"aria-label":o.buttonAriaLabel,class:r.cx("toggleButton"),onClick:e[0]||(e[0]=function(){return o.toggle&&o.toggle.apply(o,arguments)}),onKeydown:e[1]||(e[1]=function(){return o.onKeyDown&&o.onKeyDown.apply(o,arguments)})},dt(dt({},r.toggleButtonProps),r.ptm("toggleButton"))),[ze(r.$slots,r.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:l.d_collapsed,class:It(r.cx("toggleIcon"))},function(){return[(ue(),Rt(Pt(l.d_collapsed?"PlusIcon":"MinusIcon"),ae({class:r.cx("toggleIcon")},r.ptm("toggleIcon")),null,16,["class"]))]}),z("span",ae({class:r.cx("legendLabel")},r.ptm("legendLabel")),qe(r.legend),17)],16,ln)),[[c]]):He("",!0)]})],16),Ce(At,ae({name:"p-toggleable-content"},r.ptm("transition")),{default:Xe(function(){return[De(z("div",ae({id:l.id+"_content",class:r.cx("contentContainer"),role:"region","aria-labelledby":l.id+"_header"},r.ptm("contentContainer")),[z("div",ae({class:r.cx("content")},r.ptm("content")),[ze(r.$slots,"default")],16)],16,cn),[[Re,!l.d_collapsed]])]}),_:3},16)],16)}Lt.render=hn;/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function ft(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),t.push.apply(t,i)}return t}function jt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ft(Object(t),!0).forEach(function(i){pn(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ft(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function un(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function zt(r){var e=un(r,"string");return typeof e=="symbol"?e:e+""}function Ke(r){"@babel/helpers - typeof";return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(r)}function dn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,zt(i.key),i)}}function fn(r,e,t){return e&&pt(r.prototype,e),t&&pt(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function pn(r,e,t){return e=zt(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ht(r){return mn(r)||gn(r)||vn(r)||bn()}function mn(r){if(Array.isArray(r))return Fe(r)}function gn(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function vn(r,e){if(r){if(typeof r=="string")return Fe(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fe(r,e)}}function Fe(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function bn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $e=typeof window<"u"&&typeof window.document<"u",oe=$e?window:{},nt=$e&&oe.document.documentElement?"ontouchstart"in oe.document.documentElement:!1,ot=$e?"PointerEvent"in oe:!1,_="cropper",st="all",Ut="crop",Xt="move",$t="zoom",pe="e",me="w",be="s",he="n",Te="ne",ke="nw",Me="se",Ae="sw",Je="".concat(_,"-crop"),mt="".concat(_,"-disabled"),G="".concat(_,"-hidden"),gt="".concat(_,"-hide"),yn="".concat(_,"-invisible"),Ue="".concat(_,"-modal"),Qe="".concat(_,"-move"),Pe="".concat(_,"Action"),Be="".concat(_,"Preview"),lt="crop",Yt="move",Wt="none",Ze="crop",et="cropend",tt="cropmove",it="cropstart",vt="dblclick",wn=nt?"touchstart":"mousedown",En=nt?"touchmove":"mousemove",Dn=nt?"touchend touchcancel":"mouseup",bt=ot?"pointerdown":wn,yt=ot?"pointermove":En,wt=ot?"pointerup pointercancel":Dn,Et="ready",Dt="resize",xt="wheel",rt="zoom",Ot="image/jpeg",xn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,On=/^data:/,Cn=/^data:image\/jpeg;base64,/,Sn=/^img|canvas$/i,Vt=200,qt=100,Ct={viewMode:0,dragMode:lt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Vt,minContainerHeight:qt,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Tn='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',kn=Number.isNaN||oe.isNaN;function k(r){return typeof r=="number"&&!kn(r)}var St=function(e){return e>0&&e<1/0};function Ye(r){return typeof r>"u"}function ve(r){return Ke(r)==="object"&&r!==null}var Mn=Object.prototype.hasOwnProperty;function we(r){if(!ve(r))return!1;try{var e=r.constructor,t=e.prototype;return e&&t&&Mn.call(t,"isPrototypeOf")}catch{return!1}}function q(r){return typeof r=="function"}var An=Array.prototype.slice;function Gt(r){return Array.from?Array.from(r):An.call(r)}function H(r,e){return r&&q(e)&&(Array.isArray(r)||k(r.length)?Gt(r).forEach(function(t,i){e.call(r,t,i,r)}):ve(r)&&Object.keys(r).forEach(function(t){e.call(r,r[t],t,r)})),r}var B=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];return ve(e)&&i.length>0&&i.forEach(function(o){ve(o)&&Object.keys(o).forEach(function(c){e[c]=o[c]})}),e},Rn=/\.\d*(?:0|9){12}\d*$/;function xe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Rn.test(r)?Math.round(r*e)/e:r}var In=/^width|height|left|top|marginLeft|marginTop$/;function de(r,e){var t=r.style;H(e,function(i,l){In.test(l)&&k(i)&&(i="".concat(i,"px")),t[l]=i})}function Nn(r,e){return r.classList?r.classList.contains(e):r.className.indexOf(e)>-1}function X(r,e){if(e){if(k(r.length)){H(r,function(i){X(i,e)});return}if(r.classList){r.classList.add(e);return}var t=r.className.trim();t?t.indexOf(e)<0&&(r.className="".concat(t," ").concat(e)):r.className=e}}function ne(r,e){if(e){if(k(r.length)){H(r,function(t){ne(t,e)});return}if(r.classList){r.classList.remove(e);return}r.className.indexOf(e)>=0&&(r.className=r.className.replace(e,""))}}function Ee(r,e,t){if(e){if(k(r.length)){H(r,function(i){Ee(i,e,t)});return}t?X(r,e):ne(r,e)}}var Pn=/([a-z\d])([A-Z])/g;function ct(r){return r.replace(Pn,"$1-$2").toLowerCase()}function at(r,e){return ve(r[e])?r[e]:r.dataset?r.dataset[e]:r.getAttribute("data-".concat(ct(e)))}function _e(r,e,t){ve(t)?r[e]=t:r.dataset?r.dataset[e]=t:r.setAttribute("data-".concat(ct(e)),t)}function _n(r,e){if(ve(r[e]))try{delete r[e]}catch{r[e]=void 0}else if(r.dataset)try{delete r.dataset[e]}catch{r.dataset[e]=void 0}else r.removeAttribute("data-".concat(ct(e)))}var Kt=/\s\s*/,Ft=function(){var r=!1;if($e){var e=!1,t=function(){},i=Object.defineProperty({},"once",{get:function(){return r=!0,e},set:function(o){e=o}});oe.addEventListener("test",t,i),oe.removeEventListener("test",t,i)}return r}();function te(r,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=t;e.trim().split(Kt).forEach(function(o){if(!Ft){var c=r.listeners;c&&c[o]&&c[o][t]&&(l=c[o][t],delete c[o][t],Object.keys(c[o]).length===0&&delete c[o],Object.keys(c).length===0&&delete r.listeners)}r.removeEventListener(o,l,i)})}function Q(r,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=t;e.trim().split(Kt).forEach(function(o){if(i.once&&!Ft){var c=r.listeners,d=c===void 0?{}:c;l=function(){delete d[o][t],r.removeEventListener(o,l,i);for(var g=arguments.length,f=new Array(g),m=0;m<g;m++)f[m]=arguments[m];t.apply(r,f)},d[o]||(d[o]={}),d[o][t]&&r.removeEventListener(o,d[o][t],i),d[o][t]=l,r.listeners=d}r.addEventListener(o,l,i)})}function Oe(r,e,t){var i;return q(Event)&&q(CustomEvent)?i=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(e,!0,!0,t)),r.dispatchEvent(i)}function Jt(r){var e=r.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var We=oe.location,Bn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Tt(r){var e=r.match(Bn);return e!==null&&(e[1]!==We.protocol||e[2]!==We.hostname||e[3]!==We.port)}function kt(r){var e="timestamp=".concat(new Date().getTime());return r+(r.indexOf("?")===-1?"?":"&")+e}function Ie(r){var e=r.rotate,t=r.scaleX,i=r.scaleY,l=r.translateX,o=r.translateY,c=[];k(l)&&l!==0&&c.push("translateX(".concat(l,"px)")),k(o)&&o!==0&&c.push("translateY(".concat(o,"px)")),k(e)&&e!==0&&c.push("rotate(".concat(e,"deg)")),k(t)&&t!==1&&c.push("scaleX(".concat(t,")")),k(i)&&i!==1&&c.push("scaleY(".concat(i,")"));var d=c.length?c.join(" "):"none";return{WebkitTransform:d,msTransform:d,transform:d}}function Ln(r){var e=jt({},r),t=0;return H(r,function(i,l){delete e[l],H(e,function(o){var c=Math.abs(i.startX-o.startX),d=Math.abs(i.startY-o.startY),b=Math.abs(i.endX-o.endX),g=Math.abs(i.endY-o.endY),f=Math.sqrt(c*c+d*d),m=Math.sqrt(b*b+g*g),v=(m-f)/f;Math.abs(v)>Math.abs(t)&&(t=v)})}),t}function Le(r,e){var t=r.pageX,i=r.pageY,l={endX:t,endY:i};return e?l:jt({startX:t,startY:i},l)}function jn(r){var e=0,t=0,i=0;return H(r,function(l){var o=l.startX,c=l.startY;e+=o,t+=c,i+=1}),e/=i,t/=i,{pageX:e,pageY:t}}function fe(r){var e=r.aspectRatio,t=r.height,i=r.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=St(i),c=St(t);if(o&&c){var d=t*e;l==="contain"&&d>i||l==="cover"&&d<i?t=i/e:i=t*e}else o?t=i/e:c&&(i=t*e);return{width:i,height:t}}function zn(r){var e=r.width,t=r.height,i=r.degree;if(i=Math.abs(i)%180,i===90)return{width:t,height:e};var l=i%90*Math.PI/180,o=Math.sin(l),c=Math.cos(l),d=e*c+t*o,b=e*o+t*c;return i>90?{width:b,height:d}:{width:d,height:b}}function Hn(r,e,t,i){var l=e.aspectRatio,o=e.naturalWidth,c=e.naturalHeight,d=e.rotate,b=d===void 0?0:d,g=e.scaleX,f=g===void 0?1:g,m=e.scaleY,v=m===void 0?1:m,O=t.aspectRatio,E=t.naturalWidth,D=t.naturalHeight,C=i.fillColor,N=C===void 0?"transparent":C,L=i.imageSmoothingEnabled,P=L===void 0?!0:L,Y=i.imageSmoothingQuality,$=Y===void 0?"low":Y,y=i.maxWidth,A=y===void 0?1/0:y,j=i.maxHeight,W=j===void 0?1/0:j,Z=i.minWidth,se=Z===void 0?0:Z,le=i.minHeight,ie=le===void 0?0:le,K=document.createElement("canvas"),h=K.getContext("2d"),a=fe({aspectRatio:O,width:A,height:W}),n=fe({aspectRatio:O,width:se,height:ie},"cover"),s=Math.min(a.width,Math.max(n.width,E)),u=Math.min(a.height,Math.max(n.height,D)),p=fe({aspectRatio:l,width:A,height:W}),w=fe({aspectRatio:l,width:se,height:ie},"cover"),x=Math.min(p.width,Math.max(w.width,o)),M=Math.min(p.height,Math.max(w.height,c)),R=[-x/2,-M/2,x,M];return K.width=xe(s),K.height=xe(u),h.fillStyle=N,h.fillRect(0,0,s,u),h.save(),h.translate(s/2,u/2),h.rotate(b*Math.PI/180),h.scale(f,v),h.imageSmoothingEnabled=P,h.imageSmoothingQuality=$,h.drawImage.apply(h,[r].concat(Ht(R.map(function(S){return Math.floor(xe(S))})))),h.restore(),K}var Qt=String.fromCharCode;function Un(r,e,t){var i="";t+=e;for(var l=e;l<t;l+=1)i+=Qt(r.getUint8(l));return i}var Xn=/^data:.*,/;function $n(r){var e=r.replace(Xn,""),t=atob(e),i=new ArrayBuffer(t.length),l=new Uint8Array(i);return H(l,function(o,c){l[c]=t.charCodeAt(c)}),i}function Yn(r,e){for(var t=[],i=8192,l=new Uint8Array(r);l.length>0;)t.push(Qt.apply(null,Gt(l.subarray(0,i)))),l=l.subarray(i);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function Wn(r){var e=new DataView(r),t;try{var i,l,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var c=e.byteLength,d=2;d+1<c;){if(e.getUint8(d)===255&&e.getUint8(d+1)===225){l=d;break}d+=1}if(l){var b=l+4,g=l+10;if(Un(e,b,4)==="Exif"){var f=e.getUint16(g);if(i=f===18761,(i||f===19789)&&e.getUint16(g+2,i)===42){var m=e.getUint32(g+4,i);m>=8&&(o=g+m)}}}if(o){var v=e.getUint16(o,i),O,E;for(E=0;E<v;E+=1)if(O=o+E*12+2,e.getUint16(O,i)===274){O+=8,t=e.getUint16(O,i),e.setUint16(O,1,i);break}}}catch{t=1}return t}function Vn(r){var e=0,t=1,i=1;switch(r){case 2:t=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:i}}var qn={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,l=this.cropper,o=Number(t.minContainerWidth),c=Number(t.minContainerHeight);X(l,G),ne(e,G);var d={width:Math.max(i.offsetWidth,o>=0?o:Vt),height:Math.max(i.offsetHeight,c>=0?c:qt)};this.containerData=d,de(l,{width:d.width,height:d.height}),X(e,G),ne(l,G)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,l=Math.abs(t.rotate)%180===90,o=l?t.naturalHeight:t.naturalWidth,c=l?t.naturalWidth:t.naturalHeight,d=o/c,b=e.width,g=e.height;e.height*d>e.width?i===3?b=e.height*d:g=e.width/d:i===3?g=e.width/d:b=e.height*d;var f={aspectRatio:d,naturalWidth:o,naturalHeight:c,width:b,height:g};this.canvasData=f,this.limited=i===1||i===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=B({},f)},limitCanvas:function(e,t){var i=this.options,l=this.containerData,o=this.canvasData,c=this.cropBoxData,d=i.viewMode,b=o.aspectRatio,g=this.cropped&&c;if(e){var f=Number(i.minCanvasWidth)||0,m=Number(i.minCanvasHeight)||0;d>1?(f=Math.max(f,l.width),m=Math.max(m,l.height),d===3&&(m*b>f?f=m*b:m=f/b)):d>0&&(f?f=Math.max(f,g?c.width:0):m?m=Math.max(m,g?c.height:0):g&&(f=c.width,m=c.height,m*b>f?f=m*b:m=f/b));var v=fe({aspectRatio:b,width:f,height:m});f=v.width,m=v.height,o.minWidth=f,o.minHeight=m,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(d>(g?0:1)){var O=l.width-o.width,E=l.height-o.height;o.minLeft=Math.min(0,O),o.minTop=Math.min(0,E),o.maxLeft=Math.max(0,O),o.maxTop=Math.max(0,E),g&&this.limited&&(o.minLeft=Math.min(c.left,c.left+(c.width-o.width)),o.minTop=Math.min(c.top,c.top+(c.height-o.height)),o.maxLeft=c.left,o.maxTop=c.top,d===2&&(o.width>=l.width&&(o.minLeft=Math.min(0,O),o.maxLeft=Math.max(0,O)),o.height>=l.height&&(o.minTop=Math.min(0,E),o.maxTop=Math.max(0,E))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=l.width,o.maxTop=l.height},renderCanvas:function(e,t){var i=this.canvasData,l=this.imageData;if(t){var o=zn({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),c=o.width,d=o.height,b=i.width*(c/i.naturalWidth),g=i.height*(d/i.naturalHeight);i.left-=(b-i.width)/2,i.top-=(g-i.height)/2,i.width=b,i.height=g,i.aspectRatio=c/d,i.naturalWidth=c,i.naturalHeight=d,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,de(this.canvas,B({width:i.width,height:i.height},Ie({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,l=i.naturalWidth*(t.width/t.naturalWidth),o=i.naturalHeight*(t.height/t.naturalHeight);B(i,{width:l,height:o,left:(t.width-l)/2,top:(t.height-o)/2}),de(this.image,B({width:i.width,height:i.height},Ie(B({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,l=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};i&&(t.height*i>t.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*l),o.height=Math.max(o.minHeight,o.height*l),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=B({},o)},limitCropBox:function(e,t){var i=this.options,l=this.containerData,o=this.canvasData,c=this.cropBoxData,d=this.limited,b=i.aspectRatio;if(e){var g=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,m=d?Math.min(l.width,o.width,o.width+o.left,l.width-o.left):l.width,v=d?Math.min(l.height,o.height,o.height+o.top,l.height-o.top):l.height;g=Math.min(g,l.width),f=Math.min(f,l.height),b&&(g&&f?f*b>g?f=g/b:g=f*b:g?f=g/b:f&&(g=f*b),v*b>m?v=m/b:m=v*b),c.minWidth=Math.min(g,m),c.minHeight=Math.min(f,v),c.maxWidth=m,c.maxHeight=v}t&&(d?(c.minLeft=Math.max(0,o.left),c.minTop=Math.max(0,o.top),c.maxLeft=Math.min(l.width,o.left+o.width)-c.width,c.maxTop=Math.min(l.height,o.top+o.height)-c.height):(c.minLeft=0,c.minTop=0,c.maxLeft=l.width-c.width,c.maxTop=l.height-c.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&_e(this.face,Pe,i.width>=t.width&&i.height>=t.height?Xt:st),de(this.cropBox,B({width:i.width,height:i.height},Ie({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Oe(this.element,Ze,this.getData())}},Gn={initPreview:function(){var e=this.element,t=this.crossOrigin,i=this.options.preview,l=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",c=document.createElement("img");if(t&&(c.crossOrigin=t),c.src=l,c.alt=o,this.viewBox.appendChild(c),this.viewBoxImage=c,!!i){var d=i;typeof i=="string"?d=e.ownerDocument.querySelectorAll(i):i.querySelector&&(d=[i]),this.previews=d,H(d,function(b){var g=document.createElement("img");_e(b,Be,{width:b.offsetWidth,height:b.offsetHeight,html:b.innerHTML}),t&&(g.crossOrigin=t),g.src=l,g.alt=o,g.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',b.innerHTML="",b.appendChild(g)})}},resetPreview:function(){H(this.previews,function(e){var t=at(e,Be);de(e,{width:t.width,height:t.height}),e.innerHTML=t.html,_n(e,Be)})},preview:function(){var e=this.imageData,t=this.canvasData,i=this.cropBoxData,l=i.width,o=i.height,c=e.width,d=e.height,b=i.left-t.left-e.left,g=i.top-t.top-e.top;!this.cropped||this.disabled||(de(this.viewBoxImage,B({width:c,height:d},Ie(B({translateX:-b,translateY:-g},e)))),H(this.previews,function(f){var m=at(f,Be),v=m.width,O=m.height,E=v,D=O,C=1;l&&(C=v/l,D=o*C),o&&D>O&&(C=O/o,E=l*C,D=O),de(f,{width:E,height:D}),de(f.getElementsByTagName("img")[0],B({width:c*C,height:d*C},Ie(B({translateX:-b*C,translateY:-g*C},e))))}))}},Kn={bind:function(){var e=this.element,t=this.options,i=this.cropper;q(t.cropstart)&&Q(e,it,t.cropstart),q(t.cropmove)&&Q(e,tt,t.cropmove),q(t.cropend)&&Q(e,et,t.cropend),q(t.crop)&&Q(e,Ze,t.crop),q(t.zoom)&&Q(e,rt,t.zoom),Q(i,bt,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Q(i,xt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Q(i,vt,this.onDblclick=this.dblclick.bind(this)),Q(e.ownerDocument,yt,this.onCropMove=this.cropMove.bind(this)),Q(e.ownerDocument,wt,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Q(window,Dt,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;q(t.cropstart)&&te(e,it,t.cropstart),q(t.cropmove)&&te(e,tt,t.cropmove),q(t.cropend)&&te(e,et,t.cropend),q(t.crop)&&te(e,Ze,t.crop),q(t.zoom)&&te(e,rt,t.zoom),te(i,bt,this.onCropStart),t.zoomable&&t.zoomOnWheel&&te(i,xt,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&te(i,vt,this.onDblclick),te(e.ownerDocument,yt,this.onCropMove),te(e.ownerDocument,wt,this.onCropEnd),t.responsive&&te(window,Dt,this.onResize)}},Fn={resize:function(){if(!this.disabled){var e=this.options,t=this.container,i=this.containerData,l=t.offsetWidth/i.width,o=t.offsetHeight/i.height,c=Math.abs(l-1)>Math.abs(o-1)?l:o;if(c!==1){var d,b;e.restore&&(d=this.getCanvasData(),b=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(H(d,function(g,f){d[f]=g*c})),this.setCropBoxData(H(b,function(g,f){b[f]=g*c})))}}},dblclick:function(){this.disabled||this.options.dragMode===Wt||this.setDragMode(Nn(this.dragBox,Je)?Yt:lt)},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?l=e.deltaY>0?1:-1:e.wheelDelta?l=-e.wheelDelta/120:e.detail&&(l=e.detail>0?1:-1),this.zoom(-l*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(k(t)&&t!==1||k(i)&&i!==0||e.ctrlKey))){var l=this.options,o=this.pointers,c;e.changedTouches?H(e.changedTouches,function(d){o[d.identifier]=Le(d)}):o[e.pointerId||0]=Le(e),Object.keys(o).length>1&&l.zoomable&&l.zoomOnTouch?c=$t:c=at(e.target,Pe),xn.test(c)&&Oe(this.element,it,{originalEvent:e,action:c})!==!1&&(e.preventDefault(),this.action=c,this.cropping=!1,c===Ut&&(this.cropping=!0,X(this.dragBox,Ue)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var i=this.pointers;e.preventDefault(),Oe(this.element,tt,{originalEvent:e,action:t})!==!1&&(e.changedTouches?H(e.changedTouches,function(l){B(i[l.identifier]||{},Le(l,!0))}):B(i[e.pointerId||0]||{},Le(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?H(e.changedTouches,function(l){delete i[l.identifier]}):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ee(this.dragBox,Ue,this.cropped&&this.options.modal)),Oe(this.element,et,{originalEvent:e,action:t}))}}},Jn={change:function(e){var t=this.options,i=this.canvasData,l=this.containerData,o=this.cropBoxData,c=this.pointers,d=this.action,b=t.aspectRatio,g=o.left,f=o.top,m=o.width,v=o.height,O=g+m,E=f+v,D=0,C=0,N=l.width,L=l.height,P=!0,Y;!b&&e.shiftKey&&(b=m&&v?m/v:1),this.limited&&(D=o.minLeft,C=o.minTop,N=D+Math.min(l.width,i.width,i.left+i.width),L=C+Math.min(l.height,i.height,i.top+i.height));var $=c[Object.keys(c)[0]],y={x:$.endX-$.startX,y:$.endY-$.startY},A=function(W){switch(W){case pe:O+y.x>N&&(y.x=N-O);break;case me:g+y.x<D&&(y.x=D-g);break;case he:f+y.y<C&&(y.y=C-f);break;case be:E+y.y>L&&(y.y=L-E);break}};switch(d){case st:g+=y.x,f+=y.y;break;case pe:if(y.x>=0&&(O>=N||b&&(f<=C||E>=L))){P=!1;break}A(pe),m+=y.x,m<0&&(d=me,m=-m,g-=m),b&&(v=m/b,f+=(o.height-v)/2);break;case he:if(y.y<=0&&(f<=C||b&&(g<=D||O>=N))){P=!1;break}A(he),v-=y.y,f+=y.y,v<0&&(d=be,v=-v,f-=v),b&&(m=v*b,g+=(o.width-m)/2);break;case me:if(y.x<=0&&(g<=D||b&&(f<=C||E>=L))){P=!1;break}A(me),m-=y.x,g+=y.x,m<0&&(d=pe,m=-m,g-=m),b&&(v=m/b,f+=(o.height-v)/2);break;case be:if(y.y>=0&&(E>=L||b&&(g<=D||O>=N))){P=!1;break}A(be),v+=y.y,v<0&&(d=he,v=-v,f-=v),b&&(m=v*b,g+=(o.width-m)/2);break;case Te:if(b){if(y.y<=0&&(f<=C||O>=N)){P=!1;break}A(he),v-=y.y,f+=y.y,m=v*b}else A(he),A(pe),y.x>=0?O<N?m+=y.x:y.y<=0&&f<=C&&(P=!1):m+=y.x,y.y<=0?f>C&&(v-=y.y,f+=y.y):(v-=y.y,f+=y.y);m<0&&v<0?(d=Ae,v=-v,m=-m,f-=v,g-=m):m<0?(d=ke,m=-m,g-=m):v<0&&(d=Me,v=-v,f-=v);break;case ke:if(b){if(y.y<=0&&(f<=C||g<=D)){P=!1;break}A(he),v-=y.y,f+=y.y,m=v*b,g+=o.width-m}else A(he),A(me),y.x<=0?g>D?(m-=y.x,g+=y.x):y.y<=0&&f<=C&&(P=!1):(m-=y.x,g+=y.x),y.y<=0?f>C&&(v-=y.y,f+=y.y):(v-=y.y,f+=y.y);m<0&&v<0?(d=Me,v=-v,m=-m,f-=v,g-=m):m<0?(d=Te,m=-m,g-=m):v<0&&(d=Ae,v=-v,f-=v);break;case Ae:if(b){if(y.x<=0&&(g<=D||E>=L)){P=!1;break}A(me),m-=y.x,g+=y.x,v=m/b}else A(be),A(me),y.x<=0?g>D?(m-=y.x,g+=y.x):y.y>=0&&E>=L&&(P=!1):(m-=y.x,g+=y.x),y.y>=0?E<L&&(v+=y.y):v+=y.y;m<0&&v<0?(d=Te,v=-v,m=-m,f-=v,g-=m):m<0?(d=Me,m=-m,g-=m):v<0&&(d=ke,v=-v,f-=v);break;case Me:if(b){if(y.x>=0&&(O>=N||E>=L)){P=!1;break}A(pe),m+=y.x,v=m/b}else A(be),A(pe),y.x>=0?O<N?m+=y.x:y.y>=0&&E>=L&&(P=!1):m+=y.x,y.y>=0?E<L&&(v+=y.y):v+=y.y;m<0&&v<0?(d=ke,v=-v,m=-m,f-=v,g-=m):m<0?(d=Ae,m=-m,g-=m):v<0&&(d=Te,v=-v,f-=v);break;case Xt:this.move(y.x,y.y),P=!1;break;case $t:this.zoom(Ln(c),e),P=!1;break;case Ut:if(!y.x||!y.y){P=!1;break}Y=Jt(this.cropper),g=$.startX-Y.left,f=$.startY-Y.top,m=o.minWidth,v=o.minHeight,y.x>0?d=y.y>0?Me:Te:y.x<0&&(g-=m,d=y.y>0?Ae:ke),y.y<0&&(f-=v),this.cropped||(ne(this.cropBox,G),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}P&&(o.width=m,o.height=v,o.left=g,o.top=f,this.action=d,this.renderCropBox()),H(c,function(j){j.startX=j.endX,j.startY=j.endY})}},Qn={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&X(this.dragBox,Ue),ne(this.cropBox,G),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=B({},this.initialImageData),this.canvasData=B({},this.initialCanvasData),this.cropBoxData=B({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(B(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ne(this.dragBox,Ue),X(this.cropBox,G)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,H(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ne(this.cropper,mt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,X(this.cropper,mt)),this},destroy:function(){var e=this.element;return e[_]?(e[_]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,l=i.left,o=i.top;return this.moveTo(Ye(e)?e:l+Number(e),Ye(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,l=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(k(e)&&(i.left=e,l=!0),k(t)&&(i.top=t,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var l=this.options,o=this.canvasData,c=o.width,d=o.height,b=o.naturalWidth,g=o.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&l.zoomable){var f=b*e,m=g*e;if(Oe(this.element,rt,{ratio:e,oldRatio:c/b,originalEvent:i})===!1)return this;if(i){var v=this.pointers,O=Jt(this.cropper),E=v&&Object.keys(v).length?jn(v):{pageX:i.pageX,pageY:i.pageY};o.left-=(f-c)*((E.pageX-O.left-o.left)/c),o.top-=(m-d)*((E.pageY-O.top-o.top)/d)}else we(t)&&k(t.x)&&k(t.y)?(o.left-=(f-c)*((t.x-o.left)/c),o.top-=(m-d)*((t.y-o.top)/d)):(o.left-=(f-c)/2,o.top-=(m-d)/2);o.width=f,o.height=m,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),k(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,k(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(k(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,l=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(k(e)&&(i.scaleX=e,l=!0),k(t)&&(i.scaleY=t,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,i=this.imageData,l=this.canvasData,o=this.cropBoxData,c;if(this.ready&&this.cropped){c={x:o.left-l.left,y:o.top-l.top,width:o.width,height:o.height};var d=i.width/i.naturalWidth;if(H(c,function(f,m){c[m]=f/d}),e){var b=Math.round(c.y+c.height),g=Math.round(c.x+c.width);c.x=Math.round(c.x),c.y=Math.round(c.y),c.width=g-c.x,c.height=b-c.y}}else c={x:0,y:0,width:0,height:0};return t.rotatable&&(c.rotate=i.rotate||0),t.scalable&&(c.scaleX=i.scaleX||1,c.scaleY=i.scaleY||1),c},setData:function(e){var t=this.options,i=this.imageData,l=this.canvasData,o={};if(this.ready&&!this.disabled&&we(e)){var c=!1;t.rotatable&&k(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,c=!0),t.scalable&&(k(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,c=!0),k(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,c=!0)),c&&this.renderCanvas(!0,!0);var d=i.width/i.naturalWidth;k(e.x)&&(o.left=e.x*d+l.left),k(e.y)&&(o.top=e.y*d+l.top),k(e.width)&&(o.width=e.width*d),k(e.height)&&(o.height=e.height*d),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?B({},this.containerData):{}},getImageData:function(){return this.sized?B({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&H(["left","top","width","height","naturalWidth","naturalHeight"],function(i){t[i]=e[i]}),t},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&we(e)&&(k(e.left)&&(t.left=e.left),k(e.top)&&(t.top=e.top),k(e.width)?(t.width=e.width,t.height=e.width/i):k(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,i=this.options.aspectRatio,l,o;return this.ready&&this.cropped&&!this.disabled&&we(e)&&(k(e.left)&&(t.left=e.left),k(e.top)&&(t.top=e.top),k(e.width)&&e.width!==t.width&&(l=!0,t.width=e.width),k(e.height)&&e.height!==t.height&&(o=!0,t.height=e.height),i&&(l?t.height=t.width/i:o&&(t.width=t.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=Hn(this.image,this.imageData,t,e);if(!this.cropped)return i;var l=this.getData(e.rounded),o=l.x,c=l.y,d=l.width,b=l.height,g=i.width/Math.floor(t.naturalWidth);g!==1&&(o*=g,c*=g,d*=g,b*=g);var f=d/b,m=fe({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),v=fe({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),O=fe({aspectRatio:f,width:e.width||(g!==1?i.width:d),height:e.height||(g!==1?i.height:b)}),E=O.width,D=O.height;E=Math.min(m.width,Math.max(v.width,E)),D=Math.min(m.height,Math.max(v.height,D));var C=document.createElement("canvas"),N=C.getContext("2d");C.width=xe(E),C.height=xe(D),N.fillStyle=e.fillColor||"transparent",N.fillRect(0,0,E,D);var L=e.imageSmoothingEnabled,P=L===void 0?!0:L,Y=e.imageSmoothingQuality;N.imageSmoothingEnabled=P,Y&&(N.imageSmoothingQuality=Y);var $=i.width,y=i.height,A=o,j=c,W,Z,se,le,ie,K;A<=-d||A>$?(A=0,W=0,se=0,ie=0):A<=0?(se=-A,A=0,W=Math.min($,d+A),ie=W):A<=$&&(se=0,W=Math.min(d,$-A),ie=W),W<=0||j<=-b||j>y?(j=0,Z=0,le=0,K=0):j<=0?(le=-j,j=0,Z=Math.min(y,b+j),K=Z):j<=y&&(le=0,Z=Math.min(b,y-j),K=Z);var h=[A,j,W,Z];if(ie>0&&K>0){var a=E/d;h.push(se*a,le*a,ie*a,K*a)}return N.drawImage.apply(N,[i].concat(Ht(h.map(function(n){return Math.floor(xe(n))})))),C},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!Ye(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var o=e===lt,c=t.movable&&e===Yt;e=o||c?e:Wt,t.dragMode=e,_e(i,Pe,e),Ee(i,Je,o),Ee(i,Qe,c),t.cropBoxMovable||(_e(l,Pe,e),Ee(l,Je,o),Ee(l,Qe,c))}return this}},Zn=oe.Cropper,Zt=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dn(this,r),!e||!Sn.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=B({},Ct,we(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return fn(r,[{key:"init",value:function(){var t=this.element,i=t.tagName.toLowerCase(),l;if(!t[_]){if(t[_]=this,i==="img"){if(this.isImg=!0,l=t.getAttribute("src")||"",this.originalUrl=l,!l)return;l=t.src}else i==="canvas"&&window.HTMLCanvasElement&&(l=t.toDataURL());this.load(l)}}},{key:"load",value:function(t){var i=this;if(t){this.url=t,this.imageData={};var l=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(On.test(t)){Cn.test(t)?this.read($n(t)):this.clone();return}var c=new XMLHttpRequest,d=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=d,c.onerror=d,c.ontimeout=d,c.onprogress=function(){c.getResponseHeader("content-type")!==Ot&&c.abort()},c.onload=function(){i.read(c.response)},c.onloadend=function(){i.reloading=!1,i.xhr=null},o.checkCrossOrigin&&Tt(t)&&l.crossOrigin&&(t=kt(t)),c.open("GET",t,!0),c.responseType="arraybuffer",c.withCredentials=l.crossOrigin==="use-credentials",c.send()}}},{key:"read",value:function(t){var i=this.options,l=this.imageData,o=Wn(t),c=0,d=1,b=1;if(o>1){this.url=Yn(t,Ot);var g=Vn(o);c=g.rotate,d=g.scaleX,b=g.scaleY}i.rotatable&&(l.rotate=c),i.scalable&&(l.scaleX=d,l.scaleY=b),this.clone()}},{key:"clone",value:function(){var t=this.element,i=this.url,l=t.crossOrigin,o=i;this.options.checkCrossOrigin&&Tt(i)&&(l||(l="anonymous"),o=kt(i)),this.crossOrigin=l,this.crossOriginUrl=o;var c=document.createElement("img");l&&(c.crossOrigin=l),c.src=o||i,c.alt=t.alt||"The image to crop",this.image=c,c.onload=this.start.bind(this),c.onerror=this.stop.bind(this),X(c,gt),t.parentNode.insertBefore(c,t.nextSibling)}},{key:"start",value:function(){var t=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var l=oe.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(oe.navigator.userAgent),o=function(g,f){B(t.imageData,{naturalWidth:g,naturalHeight:f,aspectRatio:g/f}),t.initialImageData=B({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(i.naturalWidth&&!l){o(i.naturalWidth,i.naturalHeight);return}var c=document.createElement("img"),d=document.body||document.documentElement;this.sizingImage=c,c.onload=function(){o(c.width,c.height),l||d.removeChild(c)},c.src=i.src,l||(c.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",d.appendChild(c))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,i=this.options,l=this.image,o=t.parentNode,c=document.createElement("div");c.innerHTML=Tn;var d=c.querySelector(".".concat(_,"-container")),b=d.querySelector(".".concat(_,"-canvas")),g=d.querySelector(".".concat(_,"-drag-box")),f=d.querySelector(".".concat(_,"-crop-box")),m=f.querySelector(".".concat(_,"-face"));this.container=o,this.cropper=d,this.canvas=b,this.dragBox=g,this.cropBox=f,this.viewBox=d.querySelector(".".concat(_,"-view-box")),this.face=m,b.appendChild(l),X(t,G),o.insertBefore(d,t.nextSibling),ne(l,gt),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,X(f,G),i.guides||X(f.getElementsByClassName("".concat(_,"-dashed")),G),i.center||X(f.getElementsByClassName("".concat(_,"-center")),G),i.background&&X(d,"".concat(_,"-bg")),i.highlight||X(m,yn),i.cropBoxMovable&&(X(m,Qe),_e(m,Pe,st)),i.cropBoxResizable||(X(f.getElementsByClassName("".concat(_,"-line")),G),X(f.getElementsByClassName("".concat(_,"-point")),G)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),q(i.ready)&&Q(t,Et,i.ready,{once:!0}),Oe(t,Et)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),ne(this.element,G)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Zn,r}},{key:"setDefaults",value:function(t){B(Ct,we(t)&&t)}}])}();B(Zt.prototype,qn,Gn,Kn,Fn,Jn,Qn);var ei={exports:{}};const eo=Va(Qa);/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.16 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(r,e){(function(t,i){r.exports=i(eo)})(qa,function(t){function i(h){return d(h)||c(h)||o(h)||l()}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(h,a){if(h){if(typeof h=="string")return b(h,a);var n=Object.prototype.toString.call(h).slice(8,-1);if(n==="Object"&&h.constructor&&(n=h.constructor.name),n==="Map"||n==="Set")return Array.from(h);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(h,a)}}function c(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function d(h){if(Array.isArray(h))return b(h)}function b(h,a){(a==null||a>h.length)&&(a=h.length);for(var n=0,s=new Array(a);n<a;n++)s[n]=h[n];return s}function g(h,a){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(h);a&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),n.push.apply(n,s)}return n}function f(h){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?g(Object(n),!0).forEach(function(s){m(h,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(s){Object.defineProperty(h,s,Object.getOwnPropertyDescriptor(n,s))})}return h}function m(h,a,n){return a in h?Object.defineProperty(h,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):h[a]=n,h}function v(h){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},v(h)}function O(h,a){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(h);a&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),n.push.apply(n,s)}return n}function E(h){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?O(Object(n),!0).forEach(function(s){L(h,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(s){Object.defineProperty(h,s,Object.getOwnPropertyDescriptor(n,s))})}return h}function D(h,a){if(!(h instanceof a))throw new TypeError("Cannot call a class as a function")}function C(h,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function N(h,a,n){return a&&C(h.prototype,a),Object.defineProperty(h,"prototype",{writable:!1}),h}function L(h,a,n){return a in h?Object.defineProperty(h,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):h[a]=n,h}var P=function(a){var n=new XMLHttpRequest;return n.open(a.method||"GET",a.url),n.responseType="json",a.headers&&Object.keys(a.headers).forEach(function(s){n.setRequestHeader(s,a.headers[s])}),n},Y=function(a,n){return new Promise(function(s,u){a.onload=function(){if(a.status>=200&&a.status<300){var p;try{p=JSON.parse(a.response)}catch{p=a.response}s(p)}else u(a.response)},a.onerror=function(){return u(a.response)},a.send(JSON.stringify(n))})},$=function(a,n){var s=new FormData;for(var u in n)s.append(u,n[u]);return new Promise(function(p,w){a.onload=function(){if(a.status>=200&&a.status<300){var x;try{x=JSON.parse(a.response)}catch{x=a.response}p(x)}else w(a.response)},a.onerror=function(){return w(a.response)},a.send(s)})};function y(h){var a=P(h);return Y(a,h.body)}var A=function(){function h(a,n){D(this,h),this.file=a,this.options=n,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return N(h,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var n=this,s=this.chunksUploaded.length/this.chunks.length*100,u=this.chunksUploading.reduce(function(p,w){return p+(w.progress|0)/n.chunks.length},0);return Math.min(s+u,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(n){return!n.active&&!n.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(n){return!!n.xhr&&!!n.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(n){return!!n.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var n=0,s=this.chunkSize;n<this.fileSize;)this.chunks.push({blob:this.file.file.slice(n,s),startOffset:n,active:!1,retries:this.maxRetries}),n=s,s=n+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(n){n.xhr.abort(),n.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var n=this;return this.promise=new Promise(function(s,u){n.resolve=s,n.reject=u}),this.start(),this.promise}},{key:"start",value:function(){var n=this;y({method:"POST",headers:E(E({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(s){if(s.status!=="success")return n.file.response=s,n.reject("server");n.sessionId=s.data.session_id,n.chunkSize=s.data.end_offset,n.createChunks(),n.startChunking()}).catch(function(s){n.file.response=s,n.reject("server")})}},{key:"startChunking",value:function(){for(var n=0;n<this.maxActiveChunks;n++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(n){var s=this;n.progress=0,n.active=!0,this.updateFileProgress(),n.xhr=P({method:"POST",headers:this.headers,url:this.action}),n.xhr.upload.addEventListener("progress",function(u){u.lengthComputable&&(n.progress=Math.round(u.loaded/u.total*100))},!1),$(n.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:n.startOffset,chunk:n.blob})).then(function(u){if(n.active=!1,u.status==="success")n.uploaded=!0;else if(n.retries--<=0)return s.stopChunks(),s.reject("upload");s.uploadNextChunk()}).catch(function(){if(n.active=!1,n.retries--<=0)return s.stopChunks(),s.reject("upload");s.uploadNextChunk()})}},{key:"finish",value:function(){var n=this;this.updateFileProgress(),this.stopSpeedCalc(),y({method:"POST",headers:E(E({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(s){if(n.file.response=s,s.status!=="success")return n.reject("server");n.resolve(s)}).catch(function(s){n.file.response=s,n.reject("server")})}},{key:"startSpeedCalc",value:function(){var n=this;this.file.speed=0;var s=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var u=n.progress/100*n.fileSize;n.file.speed=u-s,s=u},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),h}(),j={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:A},W=t.defineComponent({compatConfig:{MODE:3},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return j}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,dropElementActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var a=this,n=document.createElement("input");if(n.type="file",n.multiple=!0,window.FormData&&n.files?((typeof n.webkitdirectory=="boolean"||typeof n.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof n.ondrop<"u"&&this.isRelatedTargetSupported()&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var s=0;s<this.files.length;s++){var u=this.files[s];this.maps[u.id]=u}this.$nextTick(function(){a.$parent?(a.$parent.$forceUpdate(),a.$parent.$nextTick(function(){a.watchDrop(a.drop)})):a.watchDrop(a.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var a,n=0;n<this.files.length;n++)if(a=this.files[n],a.fileObject&&!a.error&&!a.success)return!1;return!0},chunkOptions:function(){return Object.assign(j,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var a=[];return typeof this.extensions=="string"?a=this.extensions.split(","):a=this.extensions,a=a.map(function(n){return n.trim()}).filter(function(n){return n}),new RegExp("\\.("+a.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(a){this.watchActive(a)},dropActive:function(a){this.watchDropActive(a),this.$parent&&this.$parent.$forceUpdate()},drop:function(a){this.watchDrop(a)},modelValue:function(a){if(this.files!==a){this.files=a;var n=this.maps;this.maps={};for(var s=0;s<this.files.length;s++){var u=this.files[s];this.maps[u.id]=u}for(var p in this.maps){var w=this.maps[p],x=n[p];w!==x&&this.emitFile(w,x)}for(var M in n)this.maps[M]||this.emitFile(void 0,n[M])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var a=this.files;this.files=[],this.maps={},this.emitInput();for(var n=0;n<a.length;n++)this.emitFile(void 0,a[n])}return!0},get:function(a){return a?v(a)==="object"?this.maps[a.id||""]||!1:this.maps[a]||!1:!1},add:function(a,n){var s;a instanceof Array?s=a:s=[a],n===void 0&&(n=this.addIndex);for(var u=[],p=0;p<s.length;p++){var w=s[p];this.features.html5&&w instanceof Blob&&(w={id:"",file:w,size:w.size,name:w.webkitRelativePath||w.relativePath||w.name||"unknown",type:w.type}),w=w;var x=!1;if(w.fileObject===!1||(w.fileObject||typeof Element<"u"&&w.el instanceof HTMLInputElement||typeof Blob<"u"&&w.file instanceof Blob)&&(x=!0),x&&(w=f(f({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},w),{},{response:{},progress:"0.00",speed:0}),w.data=f(f({},this.data),w.data?w.data:{}),w.headers=f(f({},this.headers),w.headers?w.headers:{})),w.id||(w.id=this.newId()),!this.emitFilter(w,void 0)&&(this.iMaximum>1&&u.length+this.files.length>=this.iMaximum||(u.push(w),this.iMaximum===1)))break}if(u.length){this.iMaximum===1&&this.clear();var M;if(n===!0||n===0)M=u.concat(this.files);else if(n){var R;M=this.files.concat([]),(R=M).splice.apply(R,[n,0].concat(i(u)))}else M=this.files.concat(u);this.files=M;var S=0;n===!0||n===0?S=0:n?n>=0?n+u.length>this.files.length?S=this.files.length-u.length:S=n:(S=this.files.length-u.length+n,S<0&&(S=0)):S=this.files.length-u.length,u=this.files.slice(S,S+u.length);for(var U=0;U<u.length;U++){var T=u[U];this.maps[T.id]=T}this.emitInput();for(var I=0;I<u.length;I++)this.emitFile(u[I],void 0);return a instanceof Array?u:u[0]}},addInputFile:function(a){var n=this,s=[];this.iMaximum;var u=a.webkitEntries||a.entries||void 0;if(u!=null&&u.length)return this.getFileSystemEntry(u).then(function(M){return n.add(M)});if(a.files)for(var p=0;p<a.files.length;p++){var w=a.files[p];s.push({id:"",size:w.size,name:w.webkitRelativePath||w.relativePath||w.name,type:w.type,file:w})}else{var x=a.value.replace(/\\/g,"/").split("/");(!x||!x.length)&&(x=[a.value]),delete a.__vuex__,s.push({id:"",name:x[x.length-1],el:a})}return Promise.resolve(this.add(s))},addDataTransfer:function(a){var n,s=this;if(a!=null&&(n=a.items)!==null&&n!==void 0&&n.length){for(var u=[],p=0;p<a.items.length;p++){var w=a.items[p],x=void 0;w.getAsEntry?x=w.getAsEntry()||w.getAsFile():w.webkitGetAsEntry?x=w.webkitGetAsEntry()||w.getAsFile():x=w.getAsFile(),x&&u.push(x)}return this.getFileSystemEntry(u).then(function(U){return s.add(U)})}var M=this.iMaximum,R=[];if(a.files.length){for(var S=0;S<a.files.length&&(R.push(a.files[S]),!(M>0&&R.length>=M));S++);return Promise.resolve(this.add(R))}return Promise.resolve([])},getFileSystemEntry:function(a){var n=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(u){var p=n.iMaximum;if(!a){u([]);return}if(a instanceof Array){var w=[],x=function I(F){var ee=a[F];if(!ee||p>0&&w.length>=p)return u(w);n.getFileSystemEntry(ee,s).then(function(V){w.push.apply(w,i(V)),I(F+1)})};x(0);return}if(a instanceof Blob){u([{id:"",size:a.size,name:s+a.name,type:a.type,file:a}]);return}if(a.isFile){var M=a;M.file(function(I){u([{id:"",size:I.size,name:s+I.name,type:I.type,file:I}])});return}if(a.isDirectory&&n.dropDirectory){var R=a,S=[];n.createDirectory&&S.push({id:"",name:s+R.name,size:0,type:"text/directory",file:new File([],s+R.name,{type:"text/directory"})});var U=R.createReader(),T=function I(){U.readEntries(function(F){var ee=function V(J){if(!F[J]&&J===0||p>0&&S.length>=p)return u(S);if(!F[J])return I();n.getFileSystemEntry(F[J],s+R.name+"/").then(function(Se){S.push.apply(S,i(Se)),V(J+1)})};ee(0)})};T();return}u([])})},replace:function(a,n){var s=this.get(a),u=this.get(n);if(!s||!u||s===u)return!1;var p=this.files.concat([]),w=p.indexOf(s),x=p.indexOf(u);return w===-1||x===-1?!1:(p[w]=u,p[x]=s,this.files=p,this.emitInput(),!0)},remove:function(a){var n=this.get(a);if(n){if(this.emitFilter(void 0,n))return!1;var s=this.files.concat([]),u=s.indexOf(n);if(u===-1)return console.error("remove",n),!1;s.splice(u,1),this.files=s,delete this.maps[n.id],this.emitInput(),this.emitFile(void 0,n)}return n},update:function(a,n){var s=this.get(a);if(s){var u=f(f({},s),n);if(s.fileObject&&s.active&&!u.active&&!u.error&&!u.success&&(u.error="abort"),this.emitFilter(u,s))return!1;var p=this.files.concat([]),w=p.indexOf(s);return w===-1?(console.error("update",s),!1):(p.splice(w,1,u),this.files=p,u=this.files[w],delete this.maps[s.id],this.maps[u.id]=u,this.emitInput(),this.emitFile(u,s),u)}return!1},emitFilter:function(a,n){var s=!1;return this.$emit("input-filter",a,n,function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return s=u,s}),s},emitFile:function(a,n){var s,u=this;this.$emit("input-file",a,n),(s=a)!==null&&s!==void 0&&s.fileObject&&a.active&&(!n||!n.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){a&&u.upload(a).then(function(){var p;a&&(a=u.get(a)||void 0),(p=a)!==null&&p!==void 0&&p.fileObject&&u.update(a,{active:!1,success:!a.error})}).catch(function(p){a&&u.update(a,{active:!1,success:!1,error:p.code||p.error||p.message||p})})},Math.ceil(Math.random()*50+50))})):(!a||!a.fileObject||!a.active)&&n&&n.fileObject&&n.active&&this.uploading--,this.active&&(!!a!=!!n||a.active!==n.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(a){var n=this.get(a);if(!n)return Promise.reject(new Error("not_exists"));if(!n.fileObject)return Promise.reject(new Error("file_object"));if(n.error)return n.error instanceof Error?Promise.reject(n.error):Promise.reject(new Error(n.error));if(n.success)return Promise.resolve(n);if(n.name&&this.iExtensions&&n.type!=="text/directory"&&n.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&n.size!==void 0&&n.size>=0&&n.size>this.size&&n.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(n,this);if(this.features.html5){if(this.shouldUseChunkUpload(n))return this.uploadChunk(n);if(n.putAction)return this.uploadPut(n);if(n.postAction)return this.uploadHtml5(n)}return n.postAction?this.uploadHtml4(n):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(a){return this.chunkEnabled&&!!this.chunkOptions.handler&&a.size&&a.size>this.chunkOptions.minSize},uploadChunk:function(a){var n=this.chunkOptions.handler;return a.chunk=new n(a,this.chunkOptions),a.chunk.upload().then(function(s){return a})},uploadPut:function(a){var n=[],s;for(var u in a.data)s=a.data[u],s!=null&&n.push(encodeURIComponent(u)+"="+encodeURIComponent(s));var p=a.putAction||"",w=n.length?(p.indexOf("?")===-1?"?":"&")+n.join("&"):"",x=new XMLHttpRequest;return x.open("PUT",p+w),this.uploadXhr(x,a,a.file)},uploadHtml5:function(a){var n=new window.FormData,s;for(var u in a.data)s=a.data[u],s&&v(s)==="object"&&typeof s.toString!="function"?s instanceof File?n.append(u,s,s.name):n.append(u,JSON.stringify(s)):s!=null&&n.append(u,s);n.append(this.name,a.file,a.name||a.file.name||a.file.filename);var p=new XMLHttpRequest;return p.open("POST",a.postAction||""),this.uploadXhr(p,a,n)},uploadXhr:function(a,n,s){var u=this,p=n,w=0,x=0;a.upload.onprogress=function(R){if(p&&(p=u.get(p),!(!R.lengthComputable||!p||!p.fileObject||!p.active))){var S=Math.round(Date.now()/1e3);S!==w&&(w=S,p=u.update(p,{progress:(R.loaded/R.total*100).toFixed(2),speed:R.loaded-x}),x=R.loaded)}};var M=window.setInterval(function(){if(p&&(p=u.get(p))){var R;if((R=p)!==null&&R!==void 0&&R.fileObject&&!p.success&&!p.error&&p.active)return}M&&(clearInterval(M),M=void 0);try{a.abort(),a.timeout=1}catch{}},100);return new Promise(function(R,S){if(!p){S(new Error("not_exists"));return}var U,T=function(ee){if(!U){if(U=!0,M&&(clearInterval(M),M=void 0),!p)return S(new Error("not_exists"));if(p=u.get(p),!p)return S(new Error("not_exists"));if(!p.fileObject)return S(new Error("file_object"));if(p.error)return p.error instanceof Error?S(p.error):S(new Error(p.error));if(!p.active)return S(new Error("abort"));if(p.success)return R(p);var V={};switch(ee.type){case"timeout":case"abort":V.error=ee.type;break;case"error":a.status?a.status>=500?V.error="server":a.status>=400&&(V.error="denied"):V.error="network";break;default:a.status>=500?V.error="server":a.status>=400?V.error="denied":V.progress="100.00"}if(a.responseText){var J=a.getResponseHeader("Content-Type");J&&J.indexOf("/json")!==-1?V.response=JSON.parse(a.responseText):V.response=a.responseText}return p=u.update(p,V),p?p.error?p.error instanceof Error?S(p.error):S(new Error(p.error)):R(p):S(new Error("abort"))}};a.onload=T,a.onerror=T,a.onabort=T,a.ontimeout=T,p.timeout&&(a.timeout=p.timeout);for(var I in p.headers)a.setRequestHeader(I,p.headers[I]);p=u.update(p,{xhr:a}),p&&a.send(s)})},uploadHtml4:function(a){var n=this,s=a;if(!s)return Promise.reject(new Error("not_exists"));var u=function(T){T.keyCode===27&&T.preventDefault()},p=document.createElement("iframe");p.id="upload-iframe-"+s.id,p.name="upload-iframe-"+s.id,p.src="about:blank",p.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var w=document.createElement("form");w.setAttribute("action",s.postAction||""),w.name="upload-form-"+s.id,w.setAttribute("method","POST"),w.setAttribute("target","upload-iframe-"+s.id),w.setAttribute("enctype","multipart/form-data");for(var x in s.data){var M=s.data[x];if(M&&v(M)==="object"&&typeof M.toString!="function"&&(M=JSON.stringify(M)),M!=null){var R=document.createElement("input");R.type="hidden",R.name=x,R.value=M,w.appendChild(R)}}w.appendChild(s.el),document.body.appendChild(p).appendChild(w);var S=function(){var T,I;try{p.contentWindow&&(I=p.contentWindow.document)}catch{}if(!I)try{I=p.contentDocument?p.contentDocument:p.document}catch{I=p.document}return(T=I)!==null&&T!==void 0&&T.body?I.body.innerHTML:null};return new Promise(function(U,T){setTimeout(function(){if(!s){T(new Error("not_exists"));return}if(s=n.update(s,{iframe:p}),!s)return T(new Error("not_exists"));var I=window.setInterval(function(){s&&(s=n.get(s))&&s.fileObject&&!s.success&&!s.error&&s.active||(I&&(clearInterval(I),I=void 0),p.onabort({type:s?"abort":"not_exists"}))},100),F,ee=function(J){var Se;if(!F){if(F=!0,I&&(clearInterval(I),I=void 0),document.body.removeEventListener("keydown",u),!s)return T(new Error("not_exists"));if(s=n.get(s),!s)return T(new Error("not_exists"));if(!s.fileObject)return T(new Error("file_object"));if(s.error)return s.error instanceof Error?T(s.error):T(new Error(s.error));if(!s.active)return T(new Error("abort"));if(s.success)return U(s);var re=S(),ce={};if(typeof J=="string")return T(new Error(J));switch(J.type){case"abort":ce.error="abort";break;case"error":s.error?ce.error=s.error:re===null?ce.error="network":ce.error="denied";break;default:s.error?ce.error=s.error:re===null?ce.error="network":ce.progress="100.00"}if(re!==null){if(re&&re.substr(0,1)==="{"&&re.substr(re.length-1,1)==="}")try{re=JSON.parse(re)}catch{}ce.response=re}return s=n.update(s,ce),s?(Se=s)!==null&&Se!==void 0&&Se.error?s.error instanceof Error?T(s.error):T(new Error(s.error)):U(s):T(new Error("not_exists"))}};p.onload=ee,p.onerror=ee,p.onabort=ee,document.body.addEventListener("keydown",u),w.submit()},50)}).then(function(U){var T;return p==null||(T=p.parentNode)===null||T===void 0||T.removeChild(p),U}).catch(function(U){var T;return p==null||(T=p.parentNode)===null||T===void 0||T.removeChild(p),U})},watchActive:function(a){for(var n,s=0;n=this.files[s];)if(s++,n.fileObject)if(a&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!n.active&&!n.error&&!n.success&&this.update(n,{active:!0})}else n.active&&this.update(n,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&a!==n){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragenter",this.onDragenter,!1),this.dropElement.removeEventListener("dragleave",this.onDragleave,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var s=null;if(a)if(typeof a=="string")s=document.querySelector(a)||this.$root.$el.querySelector(a);else if(a===!0){var u;if(s=this.$parent.$el,!s||((u=s)===null||u===void 0?void 0:u.nodeType)===8){var p;s=this.$root.$el,(!s||((p=s)===null||p===void 0?void 0:p.nodeType)===8)&&(s=document.body)}}else s=a;this.dropElement=s,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragenter",this.onDragenter,!1),this.dropElement.addEventListener("dragleave",this.onDragleave,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(a,n){a!==n&&(!a&&this.dropElementActive&&(this.dropElementActive=!1),this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),a&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(a){var n,s;if(!this.dropActive&&a.dataTransfer){var u=a.dataTransfer;u!=null&&(n=u.files)!==null&&n!==void 0&&n.length?this.dropActive=!0:u.types?u.types.indexOf&&u.types.indexOf("Files")!==-1?this.dropActive=!0:(s=u.types)!==null&&s!==void 0&&s.contains&&u.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(a){this.dropActive&&(a.target===a.explicitOriginalTarget||!a.fromElement&&(a.clientX<=0||a.clientY<=0||a.clientX>=window.innerWidth||a.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragenter:function(a){!this.dropActive||this.dropElementActive||(this.dropElementActive=!0)},onDragleave:function(a){var n;if(this.dropElementActive){var s=a.relatedTarget;if(!s)this.dropElementActive=!1;else if((n=this.dropElement)!==null&&n!==void 0&&n.contains)this.dropElement.contains(s)||(this.dropElementActive=!1);else{for(var u=s;u&&u!==this.dropElement;)u=u.parentNode;u!==this.dropElement&&(this.dropElementActive=!1)}}},onDragover:function(a){a.preventDefault()},onDrop:function(a){a.preventDefault(),a.dataTransfer&&this.addDataTransfer(a.dataTransfer)},inputOnChange:async function(a){var n=this;if(!(a.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));a.target;var s=function(p){return n.reload=!0,n.$nextTick(function(){n.reload=!1}),p};return this.addInputFile(a.target).then(s).catch(s)},isRelatedTargetSupported:function(){try{var a=new MouseEvent("mouseout",{relatedTarget:document.body});return"relatedTarget"in a}catch{return!1}}}}),Z=["for"],se=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function le(h,a,n,s,u,p){return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(h.className)},[t.renderSlot(h.$slots,"default"),t.createElementVNode("label",{for:h.forId},null,8,Z),h.reload?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("input",{key:0,ref:"input",type:"file",name:h.name,id:h.forId,accept:h.accept,capture:h.capture,disabled:h.disabled,webkitdirectory:h.iDirectory,allowdirs:h.iDirectory,directory:h.iDirectory,multiple:h.multiple&&h.features.html5,onChange:a[0]||(a[0]=function(){return h.inputOnChange&&h.inputOnChange.apply(h,arguments)})},null,40,se))],2)}function ie(h,a){a===void 0&&(a={});var n=a.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css",n==="top"&&s.firstChild?s.insertBefore(u,s.firstChild):s.appendChild(u),u.styleSheet?u.styleSheet.cssText=h:u.appendChild(document.createTextNode(h))}}var K=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  position: absolute;
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return ie(K),W.render=le,W})})(ei);var to=ei.exports;const io=Ga(to),ro={class:"example-avatar"},ao={class:"drop-active"},no={class:"avatar-upload flex flex-col items-center"},oo={class:"p-2 text-center"},so={for:"avatar",class:"flex flex-col items-center"},lo=["src"],co={class:"p-2 text-center"},ho={class:"avatar-edit"},uo={key:0,class:"avatar-edit-image"},fo=["src"],po={class:"p-4 text-center"},mo={__name:"ImageUpload",setup(r){const e=Fa(),t=Ya(),i=ye([]),l=ye(!1),o=ye(null),c=ye(null),d=ye(null);function b(){t.add({severity:"success",summary:"修改成功",life:3e3})}function g(){t.add({severity:"error",summary:"修改失败",life:3e3})}Bt(l,E=>{E?Ve(()=>{d.value&&(o.value=new Zt(d.value,{aspectRatio:1/1,viewMode:1}))}):o.value&&(o.value.destroy(),o.value=null)});async function f(){l.value=!1;const E=i.value[0],C=o.value.getCroppedCanvas().toDataURL(E.type),L=await(await fetch(C)).blob(),P=new File([L],`${Date.now()}`,{type:E.type}),Y=new FormData;Y.append("file",P);const $=sessionStorage.getItem("userId")||localStorage.getItem("userId");Y.append("userId",$),c.value.update(E.id,{file:P,type:P.type,size:P.size,active:!0});try{await Ka.post("/upload",Y,{headers:{"Content-Type":"multipart/form-data"}}),e.getToDayInfo(),b()}catch(y){console.error("失败:",y),g()}}function m(E,D){E&&!D&&Ve(()=>{l.value=!0}),!E&&D&&(l.value=!1)}function v(E,D,C){if(E&&!D&&!/\.(?:gif|jpg|jpeg|png|webp)$/i.test(E.name))return C();if(E&&(!D||E.file!==D.file)){E.url="";const N=window.URL||window.webkitURL;N&&N.createObjectURL&&(E.url=N.createObjectURL(E.file))}}function O(){c.value.clear(),l.value=!1}return(E,D)=>{const C=ii;return ue(),ge(Mt,null,[Ce(C),z("div",ro,[De(z("div",ao,D[1]||(D[1]=[z("h3",null,"Drop files to upload",-1)]),512),[[Re,c.value&&c.value.dropActive]]),De(z("div",no,[z("div",oo,[z("label",so,[z("img",{src:i.value.length?i.value[0].url:"https://www.gravatar.com/avatar/default?s=200&r=pg&d=mm",class:"rounded-circle"},null,8,lo),D[2]||(D[2]=z("h4",{class:"pt-2"},[je("or"),z("br"),je("将文件拖放到任何位置进行上传")],-1))])]),z("div",co,[Ce(_t(io),{ref_key:"uploadRef",ref:c,modelValue:i.value,"onUpdate:modelValue":D[0]||(D[0]=N=>i.value=N),extensions:"gif,jpg,jpeg,png,webp",accept:"image/png,image/gif,image/jpeg,image/webp",name:"avatar",class:"btn-primary btn",drop:!l.value,onInputFilter:v,onInputFile:m},{default:Xe(()=>D[3]||(D[3]=[je(" 上传头像 ")])),_:1},8,["modelValue","drop"])])],512),[[Re,!l.value]]),De(z("div",ho,[i.value.length?(ue(),ge("div",uo,[z("img",{ref_key:"editImage",ref:d,src:i.value[0].url},null,8,fo)])):He("",!0),z("div",po,[z("button",{type:"button",class:"btn",onClick:Ge(O,["prevent"])}," 取消 "),z("button",{type:"submit",class:"btn",onClick:Ge(f,["prevent"])}," 确定 ")])],512),[[Re,i.value.length&&l.value]])])],64)}}},go={},vo={class:"card w-100%"};function bo(r,e){const t=mo,i=Lt;return ue(),ge("div",vo,[Ce(i,{legend:"个人信息修改"},{default:Xe(()=>[Ce(t)]),_:1})])}const To=Wa(go,[["render",bo]]);export{To as default};
