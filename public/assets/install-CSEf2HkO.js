import{bx as j,by as Ae,_ as O,a3 as vt,e as g,bn as ht,B as P,bo as E,n as D,b5 as Jt,bz as Te,ba as Ce,a_ as we,g as I,a2 as Ct,D as J,bA as Se,bB as Qt,bC as Me,K as Oe,c as G,U as N,bD as Re,S as K,z as qt,ab as te,x as H,w as Ie,bE as De,bF as ke,bG as Pe,bd as Ee,bH as Le,af as wt,ag as St,aO as rt,bm as Be,aH as Mt,bI as Ve,bj as ze,bJ as Ze,be as Ne,f as it,t as We,bK as Fe,bL as He,bM as Ot,a6 as Ue,I as Ge,T as Rt,k as It,q as Ye,bN as ee,bO as Xe,bP as Ke,u as $e}from"./index-CpCAiqLj.js";var Dt="\0_ec_interaction_mutex";function je(n,t,e){var r=ne(n);r[t]=e}function Je(n,t,e){var r=ne(n),i=r[t];i===e&&(r[t]=null)}function ne(n){return n[Dt]||(n[Dt]={})}j({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Ae);var Qe={axisPointer:1,tooltip:1,brush:1};function qe(n,t,e){var r=t.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==e&&!Qe.hasOwnProperty(r.mainType)&&i&&i.model!==e}function re(n,t,e,r,i,a){n=n||0;var o=e[1]-e[0];if(i!=null&&(i=V(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(t[1]-t[0]);s=V(s,[0,o]),i=a=V(s,[i,a]),r=0}t[0]=V(t[0],e),t[1]=V(t[1],e);var u=tt(t,r);t[r]+=n;var f=i||0,l=e.slice();u.sign<0?l[0]+=f:l[1]-=f,t[r]=V(t[r],l);var c;return c=tt(t,r),i!=null&&(c.sign!==u.sign||c.span<i)&&(t[1-r]=t[r]+u.sign*i),c=tt(t,r),a!=null&&c.span>a&&(t[1-r]=t[r]+c.sign*a),t}function tt(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function V(n,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,n))}var L=!0,Y=Math.min,W=Math.max,tn=Math.pow,en=1e4,nn=6,rn=6,kt="globalPan",an={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},on={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Pt={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},sn=0,un=function(n){O(t,n);function t(e){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=e,r.group=new vt,r._uid="brushController_"+sn++,g(dn,function(i,a){this._handlers[a]=ht(i,this)},r),r}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var r=this._zr;this._enableGlobalPan||je(r,kt,this._uid),g(this._handlers,function(i,a){r.on(a,i)}),this._brushType=e.brushType,this._brushOption=P(E(Pt),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Je(e,kt,this._uid),g(this._handlers,function(r,i){e.off(i,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var r=this._panels={};g(e,function(i){r[i.panelId]=E(i)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=D(e,function(p){return P(E(Pt),p,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Jt(i,e,f,u).add(l).update(l).remove(c).execute(),this;function u(p,h){return(p.id!=null?p.id:r+h)+"-"+p.brushType}function f(p,h){return u(p.__brushOption,h)}function l(p,h){var v=e[p];if(h!=null&&i[h]===s)a[p]=i[h];else{var d=a[p]=h!=null?(i[h].__brushOption=v,i[h]):ae(o,ie(o,v));dt(o,d)}}function c(p){i[p]!==s&&o.group.remove(i[p])}},t.prototype.unmount=function(){return this.enableBrush(!1),at(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Te);function ie(n,t){var e=Q[t.brushType].createCover(n,t);return e.__brushOption=t,se(e,t),n.group.add(e),e}function ae(n,t){var e=gt(t);return e.endCreating&&(e.endCreating(n,t),se(t,t.__brushOption)),t}function oe(n,t){var e=t.__brushOption;gt(t).updateCoverShape(n,t,e.range,e)}function se(n,t){var e=t.z;e==null&&(e=en),n.traverse(function(r){r.z=e,r.z2=e})}function dt(n,t){gt(t).updateCommon(n,t),oe(n,t)}function gt(n){return Q[n.__brushOption.brushType]}function mt(n,t,e){var r=n._panels;if(!r)return L;var i,a=n._transform;return g(r,function(o){o.isTargetByCursor(t,e,a)&&(i=o)}),i}function ue(n,t){var e=n._panels;if(!e)return L;var r=t.__brushOption.panelId;return r!=null?e[r]:L}function at(n){var t=n._covers,e=t.length;return g(t,function(r){n.group.remove(r)},n),t.length=0,!!e}function B(n,t){var e=D(n._covers,function(r){var i=r.__brushOption,a=E(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function ln(n){var t=n._track;if(!t.length)return!1;var e=t[t.length-1],r=t[0],i=e[0]-r[0],a=e[1]-r[1],o=tn(i*i+a*a,.5);return o>nn}function le(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function fe(n,t,e,r){var i=new vt;return i.add(new Ct({name:"main",style:yt(e),silent:!0,draggable:!0,cursor:"move",drift:I(Et,n,t,i,["n","s","w","e"]),ondragend:I(B,t,{isEnd:!0})})),g(r,function(a){i.add(new Ct({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:I(Et,n,t,i,a),ondragend:I(B,t,{isEnd:!0})}))}),i}function ce(n,t,e,r){var i=r.brushStyle.lineWidth||0,a=W(i,rn),o=e[0][0],s=e[1][0],u=o-i/2,f=s-i/2,l=e[0][1],c=e[1][1],p=l-a+i/2,h=c-a+i/2,v=l-o,d=c-s,x=v+i,_=d+i;k(n,t,"main",o,s,v,d),r.transformable&&(k(n,t,"w",u,f,a,_),k(n,t,"e",p,f,a,_),k(n,t,"n",u,f,x,a),k(n,t,"s",u,h,x,a),k(n,t,"nw",u,f,a,a),k(n,t,"ne",p,f,a,a),k(n,t,"sw",u,h,a,a),k(n,t,"se",p,h,a,a))}function ot(n,t){var e=t.__brushOption,r=e.transformable,i=t.childAt(0);i.useStyle(yt(e)),i.attr({silent:!r,cursor:r?"move":"default"}),g([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?st(n,a[0]):cn(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?on[s]+"-resize":null})})}function k(n,t,e,r,i,a,o){var s=t.childOfName(e);s&&s.setShape(vn(xt(n,t,[[r,i],[r+a,i+o]])))}function yt(n){return J({strokeNoScale:!0},n.brushStyle)}function pe(n,t,e,r){var i=[Y(n,e),Y(t,r)],a=[W(n,e),W(t,r)];return[[i[0],a[0]],[i[1],a[1]]]}function fn(n){return Qt(n.group)}function st(n,t){var e={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=Se(e[t],fn(n));return r[i]}function cn(n,t){var e=[st(n,t[0]),st(n,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function Et(n,t,e,r,i,a){var o=e.__brushOption,s=n.toRectRange(o.range),u=ve(t,i,a);g(r,function(f){var l=an[f];s[l[0]][l[1]]+=u[l[0]]}),o.range=n.fromRectRange(pe(s[0][0],s[1][0],s[0][1],s[1][1])),dt(t,e),B(t,{isEnd:!1})}function pn(n,t,e,r){var i=t.__brushOption.range,a=ve(n,e,r);g(i,function(o){o[0]+=a[0],o[1]+=a[1]}),dt(n,t),B(n,{isEnd:!1})}function ve(n,t,e){var r=n.group,i=r.transformCoordToLocal(t,e),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function xt(n,t,e){var r=ue(n,t);return r&&r!==L?r.clipPath(e,n._transform):E(e)}function vn(n){var t=Y(n[0][0],n[1][0]),e=Y(n[0][1],n[1][1]),r=W(n[0][0],n[1][0]),i=W(n[0][1],n[1][1]);return{x:t,y:e,width:r-t,height:i-e}}function hn(n,t,e){if(!(!n._brushType||gn(n,t.offsetX,t.offsetY))){var r=n._zr,i=n._covers,a=mt(n,t,e);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===L||s.panelId===a.panelId)&&Q[s.brushType].contain(i[o],e[0],e[1]))return}a&&r.setCursorStyle("crosshair")}}function ut(n){var t=n.event;t.preventDefault&&t.preventDefault()}function lt(n,t,e){return n.childOfName("main").contain(t,e)}function he(n,t,e,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(e.slice()),ln(n)||i){if(a&&!i){o.brushMode==="single"&&at(n);var u=E(o);u.brushType=Lt(u.brushType,a),u.panelId=a===L?null:a.panelId,i=n._creatingCover=ie(n,u),n._covers.push(i)}if(i){var f=Q[Lt(n._brushType,a)],l=i.__brushOption;l.range=f.getCreatingRange(xt(n,i,n._track)),r&&(ae(n,i),f.updateCommon(n,i)),oe(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&mt(n,t,e)&&at(n)&&(s={isEnd:r,removeOnClick:!0});return s}function Lt(n,t){return n==="auto"?t.defaultBrushType:n}var dn={mousedown:function(n){if(this._dragging)Bt(this,n);else if(!n.target||!n.target.draggable){ut(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var e=this._creatingPanel=mt(this,n,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var t=n.offsetX,e=n.offsetY,r=this.group.transformCoordToLocal(t,e);if(hn(this,n,r),this._dragging){ut(n);var i=he(this,n,r,!1);i&&B(this,i)}},mouseup:function(n){Bt(this,n)}};function Bt(n,t){if(n._dragging){ut(t);var e=t.offsetX,r=t.offsetY,i=n.group.transformCoordToLocal(e,r),a=he(n,t,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&B(n,a)}}function gn(n,t,e){var r=n._zr;return t<0||t>r.getWidth()||e<0||e>r.getHeight()}var Q={lineX:Vt(0),lineY:Vt(1),rect:{createCover:function(n,t){function e(r){return r}return fe({toRectRange:e,fromRectRange:e},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=le(n);return pe(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,e,r){ce(n,t,e,r)},updateCommon:ot,contain:lt},polygon:{createCover:function(n,t){var e=new vt;return e.add(new Ce({name:"main",style:yt(t),silent:!0})),e},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new we({name:"main",draggable:!0,drift:I(pn,n,t),ondragend:I(B,n,{isEnd:!0})}))},updateCoverShape:function(n,t,e,r){t.childAt(0).setShape({points:xt(n,t,e)})},updateCommon:ot,contain:lt}};function Vt(n){return{createCover:function(t,e){return fe({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},t,e,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var e=le(t),r=Y(e[0][n],e[1][n]),i=W(e[0][n],e[1][n]);return[r,i]},updateCoverShape:function(t,e,r,i){var a,o=ue(t,e);if(o!==L&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var u=[r,a];n&&u.reverse(),ce(t,e,u,i)},updateCommon:ot,contain:lt}}function mn(n){return n=_t(n),function(t){return Me(t,n)}}function yn(n,t){return n=_t(n),function(e){var r=t??e,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function xn(n,t,e){var r=_t(n);return function(i,a){return r.contain(a[0],a[1])&&!qe(i,t,e)}}function _t(n){return Oe.create(n)}var zt=["x","y","radius","angle","single"],_n=["cartesian2d","polar","singleAxis"];function bn(n){var t=n.get("coordinateSystem");return N(_n,t)>=0}function Z(n){return n+"Axis"}function An(n,t){var e=G(),r=[],i=G();n.eachComponent({mainType:"dataZoom",query:t},function(l){i.get(l.uid)||s(l)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(l){!i.get(l.uid)&&u(l)&&(s(l),a=!0)}function s(l){i.set(l.uid,!0),r.push(l),f(l)}function u(l){var c=!1;return l.eachTargetAxis(function(p,h){var v=e.get(p);v&&v[h]&&(c=!0)}),c}function f(l){l.eachTargetAxis(function(c,p){(e.get(c)||e.set(c,[]))[p]=!0})}return r}var et=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n}(),Tn=function(n){O(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,r,i){var a=Zt(e);this.settledOption=a,this.mergeDefaultAndTheme(e,i),this._doInit(a)},t.prototype.mergeOption=function(e){var r=Zt(e);P(this.option,e,!0),P(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(e){var r=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var i=this.settledOption;g([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),r=this._targetAxisInfoMap=G(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var r=!1;return g(zt,function(i){var a=this.getReferringComponents(Z(i),Re);if(a.specified){r=!0;var o=new et;g(a.models,function(s){o.add(s.componentIndex)}),e.set(i,o)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(e,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});u(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(l){return l.get("orient",!0)===r}});u(s,"single")}function u(f,l){var c=f[0];if(c){var p=new et;if(p.add(c.componentIndex),e.set(l,p),a=!1,l==="x"||l==="y"){var h=c.getReferringComponents("grid",K).models[0];h&&g(f,function(v){c.componentIndex!==v.componentIndex&&h===v.getReferringComponents("grid",K).models[0]&&p.add(v.componentIndex)})}}}a&&g(zt,function(f){if(a){var l=i.findComponents({mainType:Z(f),filter:function(p){return p.get("type",!0)==="category"}});if(l[0]){var c=new et;c.add(l[0].componentIndex),e.set(f,c),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(r){!e&&(e=r)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var r=this._rangePropMode,i=this.get("rangeMode");g([["start","startValue"],["end","endValue"]],function(a,o){var s=e[a[0]]!=null,u=e[a[1]]!=null;s&&!u?r[o]="percent":!s&&u?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(r,i){e==null&&(e=this.ecModel.getComponent(Z(r),i))},this),e},t.prototype.eachTargetAxis=function(e,r){this._targetAxisInfoMap.each(function(i,a){g(i.indexList,function(o){e.call(r,a,o)})})},t.prototype.getAxisProxy=function(e,r){var i=this.getAxisModel(e,r);if(i)return i.__dzAxisProxy},t.prototype.getAxisModel=function(e,r){var i=this._targetAxisInfoMap.get(e);if(i&&i.indexMap[r])return this.ecModel.getComponent(Z(e),r)},t.prototype.setRawRange=function(e){var r=this.option,i=this.settledOption;g([["start","startValue"],["end","endValue"]],function(a){(e[a[0]]!=null||e[a[1]]!=null)&&(r[a[0]]=i[a[0]]=e[a[0]],r[a[1]]=i[a[1]]=e[a[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var r=this.option;g(["start","startValue","end","endValue"],function(i){r[i]=e[i]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,r){if(e==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(e,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),u=0;u<s.indexList.length;u++){var f=this.getAxisProxy(o,s.indexList[u]);if(f.hostedBy(this))return f;r||(r=f)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(qt);function Zt(n){var t={};return g(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}),t}var Cn=function(n){O(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(Tn),wn=function(n){O(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,i,a){this.dataZoomModel=e,this.ecModel=r,this.api=i},t.type="dataZoom",t}(te),Sn=function(n){O(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(wn),z=g,Nt=Pe,Mn=function(){function n(t,e,r,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(bn(e)){var r=Z(this._dimName),i=e.getReferringComponents(r,K).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return E(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var e=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],u=[],f;z(["start","end"],function(p,h){var v=t[p],d=t[p+"Value"];a[h]==="percent"?(v==null&&(v=o[h]),d=i.parse(H(v,o,e))):(f=!0,d=d==null?e[h]:i.parse(d),v=H(d,e,o)),u[h]=d==null||isNaN(d)?e[h]:d,s[h]=v==null||isNaN(v)?o[h]:v}),Nt(u),Nt(s);var l=this._minMaxSpan;f?c(u,s,e,o,!1):c(s,u,o,e,!0);function c(p,h,v,d,x){var _=x?"Span":"ValueSpan";re(0,p,v,"all",l["min"+_],l["max"+_]);for(var y=0;y<2;y++)h[y]=H(p[y],v,d,!0),x&&(h[y]=i.parse(h[y]))}return{valueWindow:u,percentWindow:s}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=On(this,this._dimName,e),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;z(i,function(u){var f=u.getData(),l=f.mapDimensionsAll(r);if(l.length){if(a==="weakFilter"){var c=f.getStore(),p=D(l,function(h){return f.getDimensionIndex(h)},f);f.filterSelf(function(h){for(var v,d,x,_=0;_<l.length;_++){var y=c.get(p[_],h),b=!isNaN(y),m=y<o[0],A=y>o[1];if(b&&!m&&!A)return!0;b&&(x=!0),m&&(v=!0),A&&(d=!0)}return x&&v&&d})}else z(l,function(h){if(a==="empty")u.setData(f=f.map(h,function(d){return s(d)?d:NaN}));else{var v={};v[h]=o,f.selectRange(v)}});z(l,function(h){f.setApproximateExtent(o,h)})}});function s(u){return u>=o[0]&&u<=o[1]}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,r=this._dataExtent;z(["min","max"],function(i){var a=e.get(i+"Span"),o=e.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=H(r[0]+o,r,[0,100],!0):a!=null&&(o=H(a,[0,100],r,!0)-r[0]),t[i+"Span"]=a,t[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,r=this._valueWindow;if(e){var i=Ie(r,[0,500]);i=Math.min(i,20);var a=t.axis.scale.rawExtentInfo;e[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),e[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function On(n,t,e){var r=[1/0,-1/0];z(e,function(o){De(r,o.getData(),t)});var i=n.getAxisModel(),a=ke(i.axis.scale,i,r).calculate();return[a.min,a.max]}var Rn={getTargetSeries:function(n){function t(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var u=n.getComponent(Z(o),s);i(o,s,u,a)})})}t(function(i,a,o,s){o.__dzAxisProxy=null});var e=[];t(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Mn(i,a,s,n),e.push(o.__dzAxisProxy))});var r=G();return g(e,function(i){g(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,t){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(r,i){e.getAxisProxy(r,i).reset(e)}),e.eachTargetAxis(function(r,i){e.getAxisProxy(r,i).filterData(e,t)})}),n.eachComponent("dataZoom",function(e){var r=e.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();e.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function In(n){n.registerAction("dataZoom",function(t,e){var r=An(e,t);g(r,function(i){i.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var Wt=!1;function Dn(n){Wt||(Wt=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Rn),In(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function kn(n){n.registerComponentModel(Cn),n.registerComponentView(Sn),Dn(n)}var R=function(){function n(){}return n}(),de={};function U(n,t){de[n]=t}function ge(n){return de[n]}var Pn=function(n){O(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;g(this.option.feature,function(r,i){var a=ge(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(e)),P(r,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(qt),En=function(n){O(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,r,i,a){var o=this.group;if(o.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),u=e.get("orient")==="vertical",f=e.get("feature")||{},l=this._features||(this._features={}),c=[];g(f,function(v,d){c.push(d)}),new Jt(this._featureNames||[],c).add(p).update(p).remove(I(p,null)).execute(),this._featureNames=c;function p(v,d){var x=c[v],_=c[d],y=f[x],b=new Ee(y,e,e.ecModel),m;if(a&&a.newTitle!=null&&a.featureName===x&&(y.title=a.newTitle),x&&!_){if(Ln(x))m={onclick:b.option.onclick,featureName:x};else{var A=ge(x);if(!A)return;m=new A}l[x]=m}else if(m=l[_],!m)return;m.uid=Le("toolbox-feature"),m.model=b,m.ecModel=r,m.api=i;var T=m instanceof R;if(!x&&_){T&&m.dispose&&m.dispose(r,i);return}if(!b.get("show")||T&&m.unusable){T&&m.remove&&m.remove(r,i);return}h(b,m,x),b.setIconStatus=function(w,M){var C=this.option,S=this.iconPaths;C.iconStatus=C.iconStatus||{},C.iconStatus[w]=M,S[w]&&(M==="emphasis"?wt:St)(S[w])},m instanceof R&&m.render&&m.render(b,r,i,a)}function h(v,d,x){var _=v.getModel("iconStyle"),y=v.getModel(["emphasis","iconStyle"]),b=d instanceof R&&d.getIcons?d.getIcons():v.get("icon"),m=v.get("title")||{},A,T;rt(b)?(A={},A[x]=b):A=b,rt(m)?(T={},T[x]=m):T=m;var w=v.iconPaths={};g(A,function(M,C){var S=Be(M,{},{x:-s/2,y:-s/2,width:s,height:s});S.setStyle(_.getItemStyle());var _e=S.ensureState("emphasis");_e.style=y.getItemStyle();var X=new Mt({style:{text:T[C],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:Ve({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},r)},ignore:!0});S.setTextContent(X),ze({el:S,componentModel:e,itemName:C,formatterParamsExtra:{title:T[C]}}),S.__title=T[C],S.on("mouseover",function(){var Tt=y.getItemStyle(),be=u?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";X.setStyle({fill:y.get("textFill")||Tt.fill||Tt.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),S.setTextConfig({position:y.get("textPosition")||be}),X.ignore=!e.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){v.get(["iconStatus",C])!=="emphasis"&&i.leaveEmphasis(this),X.hide()}),(v.get(["iconStatus",C])==="emphasis"?wt:St)(S),o.add(S),S.on("click",ht(d.onclick,d,r,i,C)),w[C]=S})}Ze(o,e,i),o.add(Ne(o.getBoundingRect(),e)),u||o.eachChild(function(v){var d=v.__title,x=v.ensureState("emphasis"),_=x.textConfig||(x.textConfig={}),y=v.getTextContent(),b=y&&y.ensureState("emphasis");if(b&&!it(b)&&d){var m=b.style||(b.style={}),A=We(d,Mt.makeFont(m)),T=v.x+o.x,w=v.y+o.y+s,M=!1;w+A.height>i.getHeight()&&(_.position="top",M=!0);var C=M?-5-A.height:s+10;T+A.width/2>i.getWidth()?(_.position=["100%",C],m.align="right"):T-A.width/2<0&&(_.position=[0,C],m.align="left")}})},t.prototype.updateView=function(e,r,i,a){g(this._features,function(o){o instanceof R&&o.updateView&&o.updateView(o.model,r,i,a)})},t.prototype.remove=function(e,r){g(this._features,function(i){i instanceof R&&i.remove&&i.remove(e,r)}),this.group.removeAll()},t.prototype.dispose=function(e,r){g(this._features,function(i){i instanceof R&&i.dispose&&i.dispose(e,r)})},t.type="toolbox",t}(te);function Ln(n){return n.indexOf("my")===0}var Bn=function(n){O(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){var i=this.model,a=i.get("name")||e.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",u=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),f=Fe.browser;if(typeof MouseEvent=="function"&&(f.newEdge||!f.ie&&!f.edge)){var l=document.createElement("a");l.download=a+"."+s,l.target="_blank",l.href=u;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||o){var p=u.split(","),h=p[0].indexOf("base64")>-1,v=o?decodeURIComponent(p[1]):p[1];h&&(v=window.atob(v));var d=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var x=v.length,_=new Uint8Array(x);x--;)_[x]=v.charCodeAt(x);var y=new Blob([_]);window.navigator.msSaveOrOpenBlob(y,d)}else{var b=document.createElement("iframe");document.body.appendChild(b);var m=b.contentWindow,A=m.document;A.open("image/svg+xml","replace"),A.write(v),A.close(),m.focus(),A.execCommand("SaveAs",!0,d),document.body.removeChild(b)}}else{var T=i.get("lang"),w='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(T&&T[0]||"")+'" /></body>',M=window.open();M.document.write(w),M.document.title=a}},t.getDefaultOption=function(e){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(R),Ft="__ec_magicType_stack__",Vn=[["line","bar"],["stack"]],zn=function(n){O(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,r=e.get("icon"),i={};return g(e.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},t.getDefaultOption=function(e){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(e,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(Ht[i]){var s={series:[]},u=function(c){var p=c.subType,h=c.id,v=Ht[i](p,h,c,a);v&&(J(v,c.option),s.series.push(v));var d=c.coordinateSystem;if(d&&d.type==="cartesian2d"&&(i==="line"||i==="bar")){var x=d.getAxesByScale("ordinal")[0];if(x){var _=x.dim,y=_+"Axis",b=c.getReferringComponents(y,K).models[0],m=b.componentIndex;s[y]=s[y]||[];for(var A=0;A<=m;A++)s[y][m]=s[y][m]||{};s[y][m].boundaryGap=i==="bar"}}};g(Vn,function(c){N(c,i)>=0&&g(c,function(p){a.setIconStatus(p,"normal")})}),a.setIconStatus(i,"emphasis"),e.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var f,l=i;i==="stack"&&(f=P({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(l="tiled")),r.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:f,featureName:"magicType"})}},t}(R),Ht={line:function(n,t,e,r){if(n==="bar")return P({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,t,e,r){if(n==="line")return P({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,t,e,r){var i=e.get("stack")===Ft;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),P({id:t,stack:i?"":Ft},r.get(["option","stack"])||{},!0)}};j({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});var q=new Array(60).join("-"),F="	";function Zn(n){var t={},e=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(i)}else e.push(i)}else e.push(i)}),{seriesGroupByCategoryAxis:t,other:e,meta:r}}function Nn(n){var t=[];return g(n,function(e,r){var i=e.categoryAxis,a=e.valueAxis,o=a.dim,s=[" "].concat(D(e.series,function(h){return h.name})),u=[i.model.getCategories()];g(e.series,function(h){var v=h.getRawData();u.push(h.getRawData().mapArray(v.mapDimension(o),function(d){return d}))});for(var f=[s.join(F)],l=0;l<u[0].length;l++){for(var c=[],p=0;p<u.length;p++)c.push(u[p][l]);f.push(c.join(F))}t.push(f.join(`
`))}),t.join(`

`+q+`

`)}function Wn(n){return D(n,function(t){var e=t.getRawData(),r=[t.name],i=[];return e.each(e.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=e.getName(o),u=0;u<a-1;u++)i[u]=arguments[u];r.push((s?s+F:"")+i.join(F))}),r.join(`
`)}).join(`

`+q+`

`)}function Fn(n){var t=Zn(n);return{value:Ge([Nn(t.seriesGroupByCategoryAxis),Wn(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+q+`

`),meta:t.meta}}function $(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Hn(n){var t=n.slice(0,n.indexOf(`
`));if(t.indexOf(F)>=0)return!0}var ft=new RegExp("["+F+"]+","g");function Un(n){for(var t=n.split(/\n+/g),e=$(t.shift()).split(ft),r=[],i=D(e,function(u){return{name:u,data:[]}}),a=0;a<t.length;a++){var o=$(t[a]).split(ft);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function Gn(n){for(var t=n.split(/\n+/g),e=$(t.shift()),r=[],i=0;i<t.length;i++){var a=$(t[i]);if(a){var o=a.split(ft),s="",u=void 0,f=!1;isNaN(o[0])?(f=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},u=r[i].value):u=r[i]=[];for(var l=0;l<o.length;l++)u.push(+o[l]);u.length===1&&(f?r[i].value=u[0]:r[i]=u[0])}}return{name:e,data:r}}function Yn(n,t){var e=n.split(new RegExp(`
*`+q+`
*`,"g")),r={series:[]};return g(e,function(i,a){if(Hn(i)){var o=Un(i),s=t[a],u=s.axisDim+"Axis";s&&(r[u]=r[u]||[],r[u][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=Gn(i);r.series.push(o)}}),r}var Xn=function(n){O(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=a.get("lang")||[];s.innerHTML=u[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var f=document.createElement("div"),l=document.createElement("textarea");f.style.cssText="overflow:auto";var c=a.get("optionToContent"),p=a.get("contentToOption"),h=Fn(e);if(it(c)){var v=c(r.getOption());rt(v)?f.innerHTML=v:He(v)&&f.appendChild(v)}else{l.readOnly=a.get("readOnly");var d=l.style;d.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",d.color=a.get("textColor"),d.borderColor=a.get("textareaBorderColor"),d.backgroundColor=a.get("textareaColor"),l.value=h.value,f.appendChild(l)}var x=h.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),m=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var A=this;function T(){i.removeChild(o),A._dom=null}Ot(b,"click",T),Ot(m,"click",function(){if(p==null&&c!=null||p!=null&&c==null){T();return}var w;try{it(p)?w=p(f,r.getOption()):w=Yn(l.value,x)}catch(M){throw T(),new Error("Data view format error "+M)}w&&r.dispatchAction({type:"changeDataView",newOption:w}),T()}),b.innerHTML=u[1],m.innerHTML=u[2],m.style.cssText=b.style.cssText=y,!a.get("readOnly")&&_.appendChild(m),_.appendChild(b),o.appendChild(s),o.appendChild(f),o.appendChild(_),f.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},t.prototype.remove=function(e,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.getDefaultOption=function(e){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(R);function Kn(n,t){return D(n,function(e,r){var i=t&&t[r];if(Rt(i)&&!It(i)){var a=Rt(e)&&!It(e);a||(e={value:e});var o=i.name!=null&&e.name==null;return e=J(e,i),o&&delete e.name,e}else return e})}j({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var e=[];g(n.newOption.series,function(r){var i=t.getSeriesByName(r.name)[0];if(!i)e.push(Ue({type:"scatter"},r));else{var a=i.get("data");e.push({name:r.name,data:Kn(r.data,a)})}}),t.mergeOption(J({series:e},n.newOption))});var me=g,ye=Ye();function $n(n,t){var e=bt(n);me(t,function(r,i){for(var a=e.length-1;a>=0;a--){var o=e[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var u=s.getPercentRange();e[0][i]={dataZoomId:i,start:u[0],end:u[1]}}}}),e.push(t)}function jn(n){var t=bt(n),e=t[t.length-1];t.length>1&&t.pop();var r={};return me(e,function(i,a){for(var o=t.length-1;o>=0;o--)if(i=t[o][a],i){r[a]=i;break}}),r}function Jn(n){ye(n).snapshots=null}function Qn(n){return bt(n).length}function bt(n){var t=ye(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var qn=function(n){O(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){Jn(e),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(R);j({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});var tr=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],xe=function(){function n(t,e,r){var i=this;this._targetInfoList=[];var a=Ut(e,t);g(er,function(o,s){(!r||!r.include||N(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=nt[r.brushType](0,a,i);r.__rangeOffset={offset:Kt[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,e,r){g(t,function(i){var a=this.findTargetInfo(i,e);a&&a!==!0&&g(a.coordSyses,function(o){var s=nt[i.brushType](1,o,i.range,!0);r(i,s.values,o,e)})},this)},n.prototype.setInputRanges=function(t,e){g(t,function(r){var i=this.findTargetInfo(r,e);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=nt[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Kt[r.brushType](a.values,o.offset,nr(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(t,e){return D(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:e?e(r):null,clipPath:mn(i),isTargetByCursor:xn(i,t,r.coordSysModel),getLinearBrushOtherExtent:yn(i)}})},n.prototype.controlSeries=function(t,e,r){var i=this.findTargetInfo(t,r);return i===!0||i&&N(i.coordSyses,e.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,e){for(var r=this._targetInfoList,i=Ut(e,t),a=0;a<r.length;a++){var o=r[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<Gt.length;u++)if(Gt[u](i,o))return o}return!0},n}();function ct(n){return n[0]>n[1]&&n.reverse(),n}function Ut(n,t){return ee(n,t,{includeMainTypes:tr})}var er={grid:function(n,t){var e=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=G(),o={},s={};!e&&!r&&!i||(g(e,function(u){var f=u.axis.grid.model;a.set(f.id,f),o[f.id]=!0}),g(r,function(u){var f=u.axis.grid.model;a.set(f.id,f),s[f.id]=!0}),g(i,function(u){a.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),a.each(function(u){var f=u.coordinateSystem,l=[];g(f.getCartesians(),function(c,p){(N(e,c.getAxis("x").model)>=0||N(r,c.getAxis("y").model)>=0)&&l.push(c)}),t.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:l[0],coordSyses:l,getPanelRect:Yt.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(n,t){g(n.geoModels,function(e){var r=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:r,coordSyses:[r],getPanelRect:Yt.geo})})}},Gt=[function(n,t){var e=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&e&&(i=e.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===t.gridModel},function(n,t){var e=n.geoModel;return e&&e===t.geoModel}],Yt={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(Qt(n)),t}},nt={lineX:I(Xt,0),lineY:I(Xt,1),rect:function(n,t,e,r){var i=n?t.pointToData([e[0][0],e[1][0]],r):t.dataToPoint([e[0][0],e[1][0]],r),a=n?t.pointToData([e[0][1],e[1][1]],r):t.dataToPoint([e[0][1],e[1][1]],r),o=[ct([i[0],a[0]]),ct([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,t,e,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=D(e,function(o){var s=n?t.pointToData(o,r):t.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function Xt(n,t,e,r){var i=e.getAxis(["x","y"][n]),a=ct(D([0,1],function(s){return t?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var Kt={lineX:I($t,0),lineY:I($t,1),rect:function(n,t,e){return[[n[0][0]-e[0]*t[0][0],n[0][1]-e[0]*t[0][1]],[n[1][0]-e[1]*t[1][0],n[1][1]-e[1]*t[1][1]]]},polygon:function(n,t,e){return D(n,function(r,i){return[r[0]-e[0]*t[i][0],r[1]-e[1]*t[i][1]]})}};function $t(n,t,e,r){return[t[0]-r[n]*e[0],t[1]-r[n]*e[1]]}function nr(n,t){var e=jt(n),r=jt(t),i=[e[0]/r[0],e[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function jt(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var pt=g,rr=Ke("toolbox-dataZoom_"),ir=function(n){O(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,r,i,a){this._brushController||(this._brushController=new un(i.getZr()),this._brushController.on("brush",ht(this._onBrush,this)).mount()),sr(e,r,this,a,i),or(e,r)},t.prototype.onclick=function(e,r,i){ar[i].call(this)},t.prototype.remove=function(e,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var r=e.areas;if(!e.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new xe(At(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(f,l,c){if(c.type==="cartesian2d"){var p=f.brushType;p==="rect"?(s("x",c,l[0]),s("y",c,l[1])):s({lineX:"x",lineY:"y"}[p],c,l)}}),$n(a,i),this._dispatchZoomAction(i);function s(f,l,c){var p=l.getAxis(f),h=p.model,v=u(f,h,a),d=v.findRepresentativeAxisProxy(h).getMinMaxSpan();(d.minValueSpan!=null||d.maxValueSpan!=null)&&(c=re(0,c.slice(),p.scale.getExtent(),0,d.minValueSpan,d.maxValueSpan)),v&&(i[v.id]={dataZoomId:v.id,startValue:c[0],endValue:c[1]})}function u(f,l,c){var p;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var v=h.getAxisModel(f,l.componentIndex);v&&(p=h)}),p}},t.prototype._dispatchZoomAction=function(e){var r=[];pt(e,function(i,a){r.push(E(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(e){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(R),ar={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(jn(this.ecModel))}};function At(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function or(n,t){n.setIconStatus("back",Qn(t)>1?"emphasis":"normal")}function sr(n,t,e,r,i){var a=e._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),e._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new xe(At(n),t,{include:["grid"]}),s=o.makePanelOpts(i,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Xe("dataZoom",function(n){var t=n.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var r=t.getModel(e),i=[],a=At(r),o=ee(n,a);pt(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),pt(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,f,l){var c=u.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:rr+f+c};p[l]=c,i.push(p)}return i});function lr(n){n.registerComponentModel(Pn),n.registerComponentView(En),U("saveAsImage",Bn),U("magicType",zn),U("dataView",Xn),U("dataZoom",ir),U("restore",qn),$e(kn)}export{lr as i};
